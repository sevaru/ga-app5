webpackJsonp([0],{0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return e&&h.storage.get(l.VERSION_KEY)===l.APP_VERSION?e:(h.storage.set(l.VERSION_KEY,l.APP_VERSION),t)}n(1),n(26),n(30),n(32);var a=n(33),i=r(a),u=n(60),s=n(198);n(200);var l=n(534),c=n(702),f=n(726),d=n(615),p=r(d),h=n(536),v=(0,f.configureStore)(o(h.storage.get(l.STATE_KEY),p.default));v.subscribe((0,s.throttle)(function(){return h.storage.set(l.STATE_KEY,v.getState())},1e3)),(0,u.render)(i.default.createElement(c.Root,{store:v}),document.getElementById("root"))},26:function(e,t){},30:function(e,t){},32:function(e,t){"use strict";Object.values||(Object.values=function(e){return Object.keys(e).reduce(function(t,n){return t.push(e[n])&&t},[])}),Object.entries||(Object.entries=function(e){return Object.keys(e).reduce(function(t,n){return t.push([n,e[n]])&&t},[])}),Array.prototype.includes||(Array.prototype.includes=function(e){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");var t=Object(this),n=parseInt(t.length,10)||0;if(0===n)return!1;var r,o=parseInt(arguments[1],10)||0;o>=0?r=o:(r=n+o,r<0&&(r=0));for(var a;r<n;){if(a=t[r],e===a||e!==e&&a!==a)return!0;r++}return!1})},200:function(e,t,n){"use strict";n(201)},201:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(202),a=r(o),i=n(542),u=r(i),s=n(700),l=r(s),c=n(701),f=r(c);a.default.register({path:"/",component:u.default,title:"Genetic Algorithms (reference)"}),a.default.register({path:"/compositions",component:l.default,title:"Manage compositions"}),a.default.register({path:"/compositions/:composition",component:f.default,title:"Manage compositions",useNav:!1})},202:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(203),u=r(i),s=n(205),l=r(s),c=function(){function e(){o(this,e)}return a(e,[{key:"register",value:function(e){var t=e.path,n=e.component,r=e.title,o=e.useNav,a=void 0===o||o;a&&l.default.push({path:t,title:r}),u.default.childRoutes.push({path:t,component:n})}}]),e}();t.default=new c},203:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(204),a=r(o),i={path:"/ga",component:a.default,childRoutes:[]};t.default=i},204:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(205),f=r(c),d=n(206),p=n(459),h=r(p),v=n(537),_=r(v),y=n(541),m=r(y),b=n(542),g=r(b),O=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("div",null,l.default.createElement(h.default,null),l.default.createElement(d.Grid,{fluid:!0},l.default.createElement(d.Row,null,l.default.createElement(_.default,{nav:f.default}),l.default.createElement(m.default,null,this.props.children||l.default.createElement(g.default,null)))))}}]),t}(l.default.Component);t.default=O},205:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=[];t.default=n},459:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(460),f=r(c),d=n(206),p=n(479),h=n(534),v=n(535),_=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.onResetState=function(){return(0,v.resetState)()},i=n,a(r,i)}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement(d.Navbar,{inverse:!0,fixedTop:!0},l.default.createElement(d.NavbarBrand,null,l.default.createElement(p.Link,{to:"#/"},"GENOM ",h.APP_VERSION||"")),l.default.createElement(f.default,null),l.default.createElement(d.Button,{style:{marginTop:6},onClick:this.onResetState},"Reset state"))}}]),t}(l.default.Component);t.default=_},460:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(461),f=r(c),d=n(206),p=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return f.default.onSet(function(e){n.setState({enabled:Boolean(e)})}),n.state={enabled:!1},n}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("form",{className:"navbar-form navbar-left"},l.default.createElement(d.ButtonGroup,null,l.default.createElement(d.Button,{disabled:!this.state.enabled,onClick:this.play.bind(this)},l.default.createElement("span",{className:"glyphicon glyphicon-play"})),l.default.createElement(d.Button,{disabled:!this.state.enabled,onClick:this.stop.bind(this)},l.default.createElement("span",{className:"glyphicon glyphicon-stop"}))))}},{key:"play",value:function(){f.default.play()}},{key:"stop",value:function(){f.default.stop()}}]),t}(l.default.Component);t.default=p},461:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){return e===-1}function i(e){return 0===e}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MusyngKite",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mp3",r=window.location.protocol;return r+"//gleitz.github.io/midi-js-soundfonts/"+t+"/"+e+"-"+n+".js"}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(462),c=r(l),f=n(477),d=r(f),p=n(478);window.AudioContext=window.AudioContext||window.webkitAudioContext;var h=.2,v=function(){function e(){o(this,e)}return s(e,null,[{key:"convert",value:function(e){var t=[];return e.forEach(function(e){return a(e)&&t.length?void(t[t.length-1].duration+=h):i(e)?void t.push({note:null,duration:h}):void t.push({note:p.REFERENCE_TABLE[e],duration:h})}),t}}]),e}(),_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.acoustic_grand_piano;o(this,e),this._callbacks=[],this._ctx=new window.AudioContext,this._notes=[],this._prevNotes=[],this._timeout=null,this._instrument=null,this._isPlaying=!1,c.default.instrument(this._ctx,n,{nameToUrl:u}).then(function(e){return t._instrument=e})}return s(e,[{key:"set",value:function(e){this._notes=v.convert(e),this._prevNotes=this._notes.slice(),this._runCallbacks(e)}},{key:"_runCallbacks",value:function(e){this._callbacks.length&&this._callbacks.forEach(function(t){t(e)})}},{key:"onSet",value:function(e){this._callbacks.push(e)}},{key:"offSet",value:function(){this._callbacks=[]}},{key:"play",value:function(e){e&&this.set(e),this._instrument?this._playInternal():console.warn("Instruments not loaded yet")}},{key:"clear",value:function(){this._notes=[],this._prevNotes=[],this._runCallbacks(null)}},{key:"_playInternal",value:function(){this._isPlaying=!0,this._notes=this._prevNotes.slice(),this._playTick()}},{key:"_playTick",value:function(){var e=this,t=this._notes.shift();if(!t||!this._isPlaying)return void this._clear();var n=t.note,r=t.duration;this._instrument.play(n,this._ctx.currentTime),this._timeout=setTimeout(function(){return e._playTick()},1e3*r)}},{key:"_clear",value:function(){clearTimeout(this._timeout),this._timeout=null}},{key:"stop",value:function(){this._isPlaying=!1}}]),e}();t.default=new _},477:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={accordion:"accordion",acoustic_bass:"acoustic_bass",acoustic_grand_piano:"acoustic_grand_piano",acoustic_guitar_nylon:"acoustic_guitar_nylon",acoustic_guitar_steel:"acoustic_guitar_steel",agogo:"agogo",alto_sax:"alto_sax",applause:"applause",bagpipe:"bagpipe",banjo:"banjo",baritone_sax:"baritone_sax",bassoon:"bassoon",bird_tweet:"bird_tweet",blown_bottle:"blown_bottle",brass_section:"brass_section",breath_noise:"breath_noise",bright_acoustic_piano:"bright_acoustic_piano",celesta:"celesta",cello:"cello",choir_aahs:"choir_aahs",church_organ:"church_organ",clarinet:"clarinet",clavinet:"clavinet",contrabass:"contrabass",distortion_guitar:"distortion_guitar",drawbar_organ:"drawbar_organ",dulcimer:"dulcimer",electric_bass_finger:"electric_bass_finger",electric_bass_pick:"electric_bass_pick",electric_grand_piano:"electric_grand_piano",electric_guitar_clean:"electric_guitar_clean",electric_guitar_jazz:"electric_guitar_jazz",electric_guitar_muted:"electric_guitar_muted",electric_piano_1:"electric_piano_1",electric_piano_2:"electric_piano_2",english_horn:"english_horn",fiddle:"fiddle",flute:"flute",french_horn:"french_horn",fretless_bass:"fretless_bass",fx_1_rain:"fx_1_rain",fx_2_soundtrack:"fx_2_soundtrack",fx_3_crystal:"fx_3_crystal",fx_4_atmosphere:"fx_4_atmosphere",fx_5_brightness:"fx_5_brightness",fx_6_goblins:"fx_6_goblins",fx_7_echoes:"fx_7_echoes",fx_8_scifi:"fx_8_scifi",glockenspiel:"glockenspiel",guitar_fret_noise:"guitar_fret_noise",guitar_harmonics:"guitar_harmonics",gunshot:"gunshot",harmonica:"harmonica",harpsichord:"harpsichord",helicopter:"helicopter",honkytonk_piano:"honkytonk_piano",kalimba:"kalimba",koto:"koto",lead_1_square:"lead_1_square",lead_2_sawtooth:"lead_2_sawtooth",lead_3_calliope:"lead_3_calliope",lead_4_chiff:"lead_4_chiff",lead_5_charang:"lead_5_charang",lead_6_voice:"lead_6_voice",lead_7_fifths:"lead_7_fifths",lead_8_bass__lead:"lead_8_bass__lead",marimba:"marimba",melodic_tom:"melodic_tom",music_box:"music_box",muted_trumpet:"muted_trumpet",oboe:"oboe",ocarina:"ocarina",orchestra_hit:"orchestra_hit",orchestral_harp:"orchestral_harp",overdriven_guitar:"overdriven_guitar",pad_1_new_age:"pad_1_new_age",pad_2_warm:"pad_2_warm",pad_3_polysynth:"pad_3_polysynth",pad_4_choir:"pad_4_choir",pad_5_bowed:"pad_5_bowed",pad_6_metallic:"pad_6_metallic",pad_7_halo:"pad_7_halo",pad_8_sweep:"pad_8_sweep",pan_flute:"pan_flute",percussive_organ:"percussive_organ",piccolo:"piccolo",pizzicato_strings:"pizzicato_strings",recorder:"recorder",reed_organ:"reed_organ",reverse_cymbal:"reverse_cymbal",rock_organ:"rock_organ",seashore:"seashore",shakuhachi:"shakuhachi",shamisen:"shamisen",shanai:"shanai",sitar:"sitar",slap_bass_1:"slap_bass_1",slap_bass_2:"slap_bass_2",soprano_sax:"soprano_sax",steel_drums:"steel_drums",string_ensemble_1:"string_ensemble_1",string_ensemble_2:"string_ensemble_2",synth_bass_1:"synth_bass_1",synth_bass_2:"synth_bass_2",synth_brass_1:"synth_brass_1",synth_brass_2:"synth_brass_2",synth_choir:"synth_choir",synth_drum:"synth_drum",synth_strings_1:"synth_strings_1",synth_strings_2:"synth_strings_2",taiko_drum:"taiko_drum",tango_accordion:"tango_accordion",telephone_ring:"telephone_ring",tenor_sax:"tenor_sax",timpani:"timpani",tinkle_bell:"tinkle_bell",tremolo_strings:"tremolo_strings",trombone:"trombone",trumpet:"trumpet",tuba:"tuba",tubular_bells:"tubular_bells",vibraphone:"vibraphone",viola:"viola",violin:"violin",voice_oohs:"voice_oohs",whistle:"whistle",woodblock:"woodblock",xylophone:"xylophone"};t.default=n},478:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.REFERENCE_TABLE={1:"C3",2:"D3",3:"E3",4:"F3",5:"G3",6:"A3",7:"B3",8:"C4",9:"D4",10:"E4",11:"F4",12:"G4",13:"A4",14:"B4"}},534:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APP_VERSION="0.0.4",t.STATE_KEY="__APP_STATE__",t.VERSION_KEY="__APP_VERSION__"},535:function(e,t,n){"use strict";function r(){o.storage.remove(a.VERSION_KEY),o.storage.remove(a.STATE_KEY),location.reload()}Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=r;var o=n(536),a=n(534)},536:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.storage={get:function(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){return}},set:function(e,t){try{return localStorage.setItem(e,JSON.stringify(t))}catch(e){return}},remove:function(e){try{return localStorage.removeItem(e)}catch(e){return}}}},537:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(206),f=n(538),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.nav.map(function(e){return l.default.createElement(f.LinkContainer,{key:e.path,to:e.path},l.default.createElement(c.NavItem,null,e.title))});return l.default.createElement(c.Col,{sm:3,md:2,className:"sidebar"},l.default.createElement(c.Nav,{className:"nav-sidebar"},e))}}]),t}(l.default.Component);t.default=d},541:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(206),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement(c.Col,{sm:9,md:10,mdOffset:2,smOffset:3,className:"main"},this.props.children)}}]),t}(l.default.Component);t.default=f},542:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(543);var f=n(33),d=r(f),p=n(198),h=n(206),v=n(545),_=n(461),y=r(_),m=n(604),b=r(m),g=n(694),O=n(696),w=n(697),E=r(w),k={working:!1,paused:!1,selected:null,population:[],populations:{},statistics:[],percentages:{},percentage:0,best:null,bests:{}},P=function(e){function t(){var e,n,r,o;a(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state=l({},k),r.runner=null,r.select=function(e){y.default.set(e.content),r.setState({selected:e.content})},r.run=function(){var e=l({},k,{bests:{},statistics:[{name:"darwin-evolution",values:[{x:0,y:0}]}],working:!0});r.setState(e),r.runner&&r.runner.destroy(),r.runner=r._createRunner()},r.resume=function(){r.setState({paused:!1}),r.runner&&r.runner.resume()},r.pause=function(){r.setState({paused:!0}),r.runner&&r.runner.pause()},r.stop=function(){r.runner&&r.runner.stop()},o=n,i(r,o)}return u(t,e),c(t,[{key:"render",value:function(){var e=this,t=this.context.store,n=null,r=null,o=null,a=null;if(this.state.population.length&&(a=d.default.createElement(O.IndividualsTable,{population:this.state.population,onSelect:this.select})),(0,p.isEmpty)(this.state.populations)||(a=d.default.createElement("div",null,Object.entries(this.state.populations).map(function(t){var n=s(t,2),r=n[0],o=n[1];return d.default.createElement(O.IndividualsTable,{key:r,name:r,population:o,onSelect:e.select})}))),this.state.selected&&(n=d.default.createElement(h.Panel,{header:"Scores"},d.default.createElement(E.default,{data:this.state.selected}))),this.state.percentage){var i=0|this.state.percentage;r=d.default.createElement("div",{className:"progress-bar-wrapper"},d.default.createElement("h3",null,"Progress: "),d.default.createElement(h.ProgressBar,{now:i,label:i+"%"}))}if((0,p.isEmpty)(this.state.percentages)||(r=this._renderProgressBarForEvolutions()),this.state.best){var u=100*this.state.best.fitness.value|0;o=d.default.createElement("div",{className:"progress-bar-wrapper"},d.default.createElement("h3",null,"Best: "),d.default.createElement(h.ProgressBar,{bsStyle:"success",now:u,label:u+"%",key:"1"}))}return d.default.createElement(h.Grid,{fluid:!0},d.default.createElement(h.Row,null,d.default.createElement(h.Col,{sm:8,md:8},this.state.statistics.length?d.default.createElement(v.Graph,{series:this.state.statistics}):null,n,d.default.createElement(b.default,{store:t})),d.default.createElement(h.Col,{sm:4,md:4},d.default.createElement(h.Panel,{header:"Population"},this._renderButtons(),o,r,a))))}},{key:"_renderProgressBarForEvolutions",value:function(){var e=this;return d.default.createElement("div",null,Object.entries(this.state.percentages).map(function(t){var n=s(t,2),r=n[0],o=n[1];return[e._getEvolutionProgressHeaderText(r),0|o]}).map(function(e){var t=s(e,2),n=t[0],r=t[1];return d.default.createElement("div",{key:n,className:"progress-bar-wrapper"},d.default.createElement("h5",null,"Progress ",n,":"),d.default.createElement(h.ProgressBar,{now:r,label:r+"%"}))}))}},{key:"_getEvolutionProgressHeaderText",value:function(e){var t=e.replace("-evolution",""),n=this.state.bests[e];return n?"("+t+") "+(100*n.fitness.value|0)+"%":"("+t+")"}},{key:"_renderButtons",value:function(){return d.default.createElement(h.ButtonGroup,null,this._renderFirstButton(),d.default.createElement(h.Button,{bsStyle:"danger",onClick:this.stop},d.default.createElement("span",{className:"glyphicon glyphicon-stop"})))}},{key:"_renderFirstButton",value:function(){var e=this.state,t=e.paused,n=e.working;return n&&!t?d.default.createElement(h.Button,{bsStyle:"warning",onClick:this.pause},d.default.createElement("span",{className:"glyphicon glyphicon-pause"})):d.default.createElement(h.Button,{bsStyle:"success",onClick:n?this.resume:this.run},d.default.createElement("span",{className:"glyphicon glyphicon-play"}))}},{key:"_createRunner",value:function(){var e=this.context.store.getState().GA;return e.options.useEvolutionStrategies?this._createEvolutionRunner(e):this._createDefaultRunner(e)}},{key:"_createDefaultRunner",value:function(e){var t=this,n=function(e){var n=e.data;return t.setState({population:n,working:!1,paused:!1})},r=function(e){var n=e.data;return t.setState({population:n})},o=function(e){var n=e.percentage,r=e.best,o=t.state.statistics;o[0].values.push({x:n,y:100*r.fitness.value}),t.setState({best:r,percentage:n,statistics:o})};return new g.GARunner(e,{onDone:n,onProgress:o,onPause:r})}},{key:"_createEvolutionRunner",value:function(e){var t=this,n=function(e){var n=e.id,r=e.data,a=t.state.populations,i=t._getNameFromId(n);t.setState({populations:l({},a,o({},i,r)),working:!1,paused:!1})},r=function(e){var n=e.id,r=e.data,a=t.state.populations,i=t._getNameFromId(n);t.setState({populations:l({},a,o({},i,r))})},a=function(e){var n=e.id,r=e.percentage,a=e.best,i=t.state,u=i.statistics,s=i.bests,c=t.state.best&&t.state.best.fitness.value||0,f=a.fitness.value,d=t.state.percentages,p=t._getNameFromId(n),h=u.find(function(e){return e.name===p}),v={x:r,y:100*f};h?h.values.push(v):u.push({name:p,values:[{x:0,y:0},v]});var _={statistics:u,bests:l({},s,o({},p,a)),percentages:l({},d,o({},p,r))};f>c&&(_.best=a),t.setState(_)};return new g.GARunner(e,{onDone:n,onProgress:a,onPause:r})}},{key:"_getNameFromId",value:function(e){return e.split("_")[0]}}]),t}(d.default.Component);t.default=P,P.contextTypes={store:d.default.PropTypes.object}},543:function(e,t){},545:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(206),f=n(546),d=n(602),p=r(d),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.series,n=e.containerWidth,r=n-40,o={x:0,y:0,width:r,height:r/2};return l.default.createElement(c.Panel,{header:"Graph"},l.default.createElement(f.LineChart,{legend:!0,data:t,width:o.width,height:o.height,viewBoxObject:o,yAxisLabel:"Best",xAxisLabel:"Elapsed Iteration",gridHorizontal:!0}))}}]),t}(l.default.Component);t.Graph=(0,p.default)()(h)},604:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),a=r(o),i=n(605),u=n(619),s=n(642),l=n(670),c=n(671);t.default=function(e){var t=e.store;return a.default.createElement("div",null,a.default.createElement(c.Component,{store:t}),a.default.createElement(l.render,{store:t}),a.default.createElement(i.Component,{store:t}),a.default.createElement(u.Component,{store:t}),a.default.createElement(s.Component,{store:t}))}},605:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.run=void 0;var o=n(606),a=r(o),i=n(616),u=r(i),s=n(617),l=r(s),c=n(618),f=r(c),d=(0,a.default)("crossover",[u.default,l.default,f.default]),p=d.run,h=d.Component;t.run=p,t.Component=h},606:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=(0,a.createPluginsHash)(t),r=new c.default(n,p,e),o=r.getRunOnce.bind(r);return{run:o,Component:(0,i.createRenderComponent)(e,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.createCompositeProvider=o;var a=n(607),i=n(608),u=n(613),s=r(u),l=n(614),c=r(l),f=n(615),d=r(f),p=d.default.GA;t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,a.createPluginsHash)(t),o=new s.default(r,p,e),u=n?o.getRunRandom.bind(o):o.getRunOnce.bind(o);return{run:u,Component:(0,i.createRenderComponent)(e,r)}}},607:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createPluginsHash=function(e){return e.reduce(function(e,t){return t.getInitialState||(t.getInitialState=function(){return{}}),e[t.name]=t,e},{})}},608:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.createRenderComponent=void 0;var o=n(33),a=r(o),i=n(206),u=n(609),s=n(612);t.createRenderComponent=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.expanded,o=void 0!==r&&r;return function(n){var r=n.store,l=r.getState().GA[e],c=function(t,n,o){r.dispatch((0,s.changeOptions)([e,t,n],o))},f=Object.keys(t).map(function(e){var n=t[e],r=n.render&&n.render(l[e],c.bind(null,e));return a.default.createElement(i.Panel,{header:e,key:e},a.default.createElement(u.SliderControl,{defaultValue:l[e].weight,onBlur:c.bind(null,e),field:"weight"}),r)});return a.default.createElement(i.Panel,{defaultExpanded:o,collapsible:!0,header:e+" options"},f)}}},609:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createSliderFactory=t.probabilitySlider=t.CheckboxControl=t.SliderControl=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(610),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){throw new Error("Abstract class")}},{key:"onBlur",value:function(e,t){var n=e.field,r=e.type,o=void 0===r?"number":r,a=void 0;switch(o){case"number":a=Number(t.target.value);break;case"boolean":a=t.target.checked}this.props.onBlur(n,a)}}]),t}(l.default.Component),d=t.SliderControl=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.onChange=function(e){n.setState({value:e.target.value})};var r=n.props,i=r.field,u=r.defaultValue;return n.state={value:u},n.blurBinded=n.onBlur.bind(n,{field:i,type:"number"}),n}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props.title||c.stringUtils.camelCaseToHuman(this.props.field),t=this.props.min||0,n=this.props.max||1,r=this.props.step||.01;return l.default.createElement("div",{className:"form-group"},l.default.createElement("label",null,e," - ",this.state.value),l.default.createElement("input",{type:"range",value:this.state.value,min:t,max:n,step:r,onChange:this.onChange,onBlur:this.blurBinded}))}}]),t}(f);t.CheckboxControl=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:n.props.defaultValue},n}return i(t,e),u(t,[{key:"onChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.defaultValue,r=e.title,o=r||c.stringUtils.camelCaseToHuman(t);return l.default.createElement("div",{className:"checkbox"},l.default.createElement("label",null,l.default.createElement("input",{type:"checkbox",defaultChecked:n,onChange:this.onChange.bind(this),onBlur:this.onBlur.bind(this,{field:t,type:"boolean"
})}),o))}}]),t}(f),t.probabilitySlider=function(e){return{field:e,min:0,max:1,step:.01}},t.createSliderFactory=function(e,t){return function(n){return n.map(function(n){var r=n.field,o=n.title,a=void 0===o?c.stringUtils.camelCaseToHuman(r):o,i=n.min,u=void 0===i?1:i,s=n.max,f=void 0===s?100:s,p=n.step,h=void 0===p?1:p;return l.default.createElement(d,{key:r,defaultValue:e[r],onBlur:t,field:r,title:a,min:u,max:f,step:h})})}}},610:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(!Array.isArray(e))throw new TypeError("arr should be an array "+e+" given.")}function a(e){if(!e||"object"!==("undefined"==typeof e?"undefined":i(e)))throw new TypeError("obj should be an object "+e+" given")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(611);Object.defineProperty(t,"notesUtils",{enumerable:!0,get:function(){return r(u).default}});var s={randomBetween:function(e,t){if(e<0||t<0)throw"wft randomBetween";return void 0===t&&(t=e,e=0),Math.floor(Math.random()*t)+e},normalizeValue:function(e,t){if(e<=t)return e;var n=e%t;return n?n:t},strip:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.min,r=void 0===n?0:n,o=t.max,a=void 0===o?1:o;return e<r?r:e>=a?a:e},fluctuate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.min,o=void 0===r?0:r,a=n.max,i=void 0===a?1:a,u=e+t*Math.random()*(p.headsOrTails()?1:-1);return s.strip(u,{min:o,max:i})}},l=t.arrayUtils={last:function(e){return e[e.length-1]},make:function(e,t){t|=0;for(var n=[];t--;)n[t]=e;return n},getRandomIndexes:function(e,t,n){var r=[];for(e>t&&(e=t);e>0;){var o=s.randomBetween(t);r.indexOf(o)===-1&&(n&&n.includes(o)||(r.push(o),e--))}return r},randomKey:function(e){return o(e),s.randomBetween(e.length)},randomElement:function(e){var t=l.randomKey(e);return e[t]},findObjectByKey:function(e,t,n){return e.find(function(e){return e.hasOwnProperty(t)&&e[t]===n})}},c={randomElement:function(e){a(e);var t=Object.keys(e),n=l.randomElement(t);return e[n]}},f={camelCaseToHuman:function(e){var t=/([a-z])([A-Z])/g,n="$1 $2",r=" ";return e.replace(t,n).split(r).map(function(e){return f.firstUpper(e)}).join(r)},firstUpper:function(e){return""+e[0].toUpperCase()+e.slice(1).toLowerCase()}},d={getRandomKey:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=Object.keys(e),r=Object.values(e).map(function(e){return 100*t(e)});return d._roulette(n,r)},getRandomKeyByWeight:function(e){return d.getRandomKey(e,function(e){return e.weight})},_roulette:function(e,t){var n=[];e.forEach(function(e,r){n=n.concat(l.make(e,t[r]))});var r=s.randomBetween(n.length);return n[r]}},p=t.randomUtils={headsOrTails:function(){return Math.random()>.5}};t.uuid=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)};t.objUtils=c,t.numberUtils=s,t.stringUtils=f,t.selectionUtils=d},611:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=0,a=-1,i=function(){function e(){n(this,e)}return r(e,[{key:"toRhythm",value:function(e){var t=[],n=void 0;return e.forEach(function(e,r){if(r%8===0&&(n&&t.push(n),n=[]),e===o)return void n.push(-1);if(e===a&&n.length){var i=n.length-1,u=n[i];return void(n[i]=u>0?u+1:u-1)}n.push(1)}),t.push(n),t}},{key:"toPitch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=void 0;return e.forEach(function(e,i){i%8===0&&(r&&n.push(r),r=[]),e!==o&&e!==a&&r.push(t?e%7:e)}),r.length&&n.push(r),n}}]),e}();t.default=new i},612:function(e,t){"use strict";function n(e,t){return{type:r,optionsPath:e,value:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.changeOptions=n;var r=t.OPTIONS_CHANGE_ACTION="optionsChangeAction"},613:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(610),u=function(){function e(t,n,r){o(this,e),this._all=t,this._providerName=r,this._registerInStore(n)}return a(e,[{key:"getRunOnce",value:function(e){var t=this._getKeyAndFunction(e),n=t.fn,o=t.key,a=e[o];return function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.run.apply(n,r(t.concat(a)))}}},{key:"getRunRandom",value:function(e){var t=this;return function(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=t._getKeyAndFunction(e),u=i.fn,s=i.key,l=o.concat(e[s]);return u.run.apply(u,r(l))}}},{key:"_getKeyAndFunction",value:function(e){var t=this._getKey(e),n=this._getFunction(t);return{key:t,fn:n}}},{key:"_getKey",value:function(e){return i.selectionUtils.getRandomKeyByWeight(e)}},{key:"_getFunction",value:function(e){return this._all[e]}},{key:"_registerInStore",value:function(e){var t=this;e[this._providerName]={},Object.keys(this._all).map(function(e){return t._all[e]}).forEach(function(n){var r=n.name,o=n.getInitialState;return e[t._providerName][r]=o()})}}]),e}();t.default=u},614:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(198),f=r(c),d=n(613),p=r(d),h=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"getRunOnce",value:function(e){var t=this,n=Object.keys(e).map(function(t){return e[t].weight}).reduce(function(e,t){return e+t},0),r=(0,f.default)(e).pickBy(function(e){var t=e.weight;return t>0}),a=r.mapValues(function(e){return e.weight/n}).value(),i=Object.keys(e).reduce(function(t,n){var r=e[n]._important;return t.found?t:(r&&(t.found=!0,t.value[n]=1),t)},{found:!1,value:{}}).value;f.default.isEmpty(i)||(a=i);var u=Object.keys(a).reduce(function(n,r){var i=e[r],u=a[r],l=t._all[r].run;return s({},n,o({},r,{key:r,weight:u,fn:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.apply(void 0,[].concat(t,[i]))}}))},{});return function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object.keys(u).map(function(e){return u[e]}).reduce(function(e,n){var r=n.fn,a=n.weight,i=n.key,u=r.apply(void 0,t)*a;return{value:u+e.value,full:s({},e.full,o({},i,u))}},{value:0,full:{}})}}},{key:"getRunRandom",value:function(){throw new Error("CompositeCalculateProvider use only run once fn")}}]),t}(p.default);t.default=h},615:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={GA:{}};t.default=n},616:function(e,t,n){"use strict";function r(e,t){return[e.slice(0,t),e.slice(t)]}function o(e,t){var n=a.numberUtils.randomBetween(e.length),o=r(e,n),i=r(t,n);return Math.random()>.5?[].concat(o[0],i[1]):[].concat(i[0],o[1])}Object.defineProperty(t,"__esModule",{value:!0});var a=n(610),i=function(){return{weight:.5}};t.default={name:"one-point-crossover",run:o,getInitialState:i}},617:function(e,t,n){"use strict";function r(e,t,n){return[e.slice(0,t),e.slice(t,n),e.slice(n)]}function o(e,t){for(var n=[],o=a.numberUtils.randomBetween(e.length),i=a.numberUtils.randomBetween(e.length),u=!1,s=!1;i===o;)i=a.numberUtils.randomBetween(e.length);if(o>i){var l=o;o=i,i=l}for(var c=r(e,o,i),f=r(t,o,i),d=0,p=c.length;d<p;d++){if(d===p-1){if(!s){n=n.concat(f[d]);continue}if(!u){n=n.concat(c[d]);continue}}a.randomUtils.headsOrTails()?(n=n.concat(c[d]),u=!0):(n=n.concat(f[d]),s=!0)}return n}Object.defineProperty(t,"__esModule",{value:!0});var a=n(610),i=function(){return{weight:.7}};t.default={name:"two-point-crossover",getInitialState:i,run:o}},618:function(e,t,n){"use strict";function r(e,t){var n=t.slice(),r=o.arrayUtils.getRandomIndexes(e.length/2,e.length);return r.forEach(function(t){n[t]=e[t]}),n}Object.defineProperty(t,"__esModule",{value:!0});var o=n(610),a=function(){return{weight:.5}};t.default={name:"random-crossover",run:r,getInitialState:a}},619:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.run=void 0;var o=n(606),a=r(o),i=n(620),u=r(i),s=n(627),l=r(s),c=n(632),f=r(c),d=n(633),p=r(d),h=n(634),v=r(h),_=n(635),y=r(_),m=n(637),b=r(m),g=n(638),O=r(g),w=n(639),E=r(w),k=n(641),P=r(k),j=(0,a.default)("mutation",[u.default,l.default,f.default,p.default,v.default,y.default,b.default,O.default,E.default,P.default],!0),S=j.run,C=j.Component;t.run=S,t.Component=C},620:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(33),s=r(u),l=n(609),c=n(610),f=n(621),d=r(f),p=n(622),h=r(p),v=n(623),_=r(v),y={count:64},m=function(){function e(){a(this,e)}return i(e,[{key:"mutate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({},y,n);var r=new d.default(e),a=r.bars(),i=a.map(function(e){var r=Math.floor(n.count/a.length),i=e.length-1-1;return r>=i?e:c.arrayUtils.getRandomIndexes(r,i).reduce(function(e,n){if(!e[n+1])return e;var r=[e[n].clone(),e[n+1].clone()];return[].concat(o(e.slice(0,n).map(function(e){return e.clone()})),o(t._mutateOne.apply(t,r)),o(e.slice(n+2)))},e)});return h.default.fromBarsToRaw(i)}},{key:"_mutateOne",value:function(e,t){var n=!1;if(Math.random()<.5){n=!0;var r=[t,e];e=r[0],t=r[1]}var o=_.default.create(e.value(),e.length()+1);if(1===t.length())return[o];var a=_.default.create(t.value(),t.length()-1);return n?[a,o]:[o,a]}}]),e}(),b=new m,g=b.mutate.bind(b),O=function(e,t){return s.default.createElement(l.SliderControl,{defaultValue:e.count,onBlur:t.bind(null,"count"),field:"count",title:"Count of genes",min:1,max:16,step:1})},w=function(){return{weight:.4,count:7}};t.default={name:"change-duration-mutation",run:g,render:O,getInitialState:w}},621:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(622),s=r(u),l=n(625),c=r(l),f=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.default.getBarLength();if(a(this,e),!Array.isArray(t))throw"Invalid argument raw: "+t+", should be an array of numbers";this._barLength=n,this._raw=null,this._notes=null,this._bars=null,this._updateState(t)}return i(e,null,[{key:"create",value:function(t,n){return new e(t,n)}}]),i(e,[{key:"length",value:function(){return this._notes.length}},{key:"bars",value:function(){var e=this,t=[],n=[],r=0;return this._notes.forEach(function(o){r+=o.length(),n.push(o.clone()),console.assert(r<=e._barLength,"Counter: "+r+" but should be less than "+e._barLength),r===e._barLength&&(r=0,t.push(n),n=[])}),t}},{key:"rawBars",value:function(){return this.bars().map(function(e){return e.reduce(function(e,t){return[].concat(o(e),o(t.toRaw()))},[])})}},{key:"raw",value:function(){return this._raw.slice()}},{key:"_updateState",value:function(e){this._raw=e.slice(),this._notes=s.default.toNotes(this._raw),this._bars=this.bars()}}]),e}();t.default=f},622:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(623),u=r(i),s=function(){function e(){o(this,e),this._PAUSE=0,this._HOLD=-1}return a(e,[{key:"toNotes",value:function(e){for(var t=[],n=0,r=0,o=e.length;r<o;r++){var a=e[r];if(0!==r||a!==this._HOLD)if(a!==this._HOLD||r%8!==0)if(a!==this._HOLD)n=a,t.push(u.default.create(a,1,!1));else{var i=t.pop();t.push(u.default.create(i.value(),i.length()+1,!1))}else t.push(u.default.create(n,1,!0));else t.push(u.default.create(0,1,!1))}return t}},{key:"fromBarsToRaw",value:function(e){var t=[];return e.forEach(function(e){e.forEach(function(e){t=t.concat(e.toRaw())})}),t}}]),e}();t.default=new s},623:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(624),i=0,u=7,s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r(this,e),t<0||a.availableValues.indexOf(t)===-1)throw"Invalid argument value: "+t;if(!Number.isInteger(n)||n<=0)throw"Invalid argument length: "+n;this._value=t,this._length=n,this._legato=o}return o(e,[{key:"clone",value:function(){return new e(this._value,this._length,this._legato)}},{key:"pitch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isNote())throw"Current note is pause";return e?this._value%u:this._value}},{key:"value",value:function(){return this._value}},{key:"length",value:function(){return this._length}},{key:"isNote",value:function(){return this._value>i}},{key:"isPause",value:function(){return this._value===i}},{key:"toRaw",value:function(){var e=[this._value];if(this._length>1)for(var t=this._length-1;t>0;)t--,e.push(-1);return e}},{key:"increaseLength",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._changeLength(e)}},{key:"decreaseLength",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(1===this._length)throw"Length can not be less than 1";return this._changeLength(-e)}},{key:"_changeLength",value:function(t){return e.create(this._value,this._length+t)}}],[{key:"create",value:function(t,n,r){return new e(t,n,r)}}]),e}();t.default=s},624:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.availableValues=[-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],t.REFERENCE_INDIVIDUAL=[3,-1,3,-1,3,-1,-1,-1,3,-1,3,-1,3,-1,-1,-1,3,-1,5,-1,1,-1,-1,2,3,-1,-1,-1,-1,-1,-1,-1,4,-1,4,-1,4,-1,-1,4,4,-1,3,-1,3,-1,3,3,3,-1,2,-1,2,-1,3,-1,2,-1,-1,-1,5,-1,-1,-1,3,-1,3,-1,3,-1,-1,-1,3,-1,3,-1,3,-1,-1,-1,3,-1,5,-1,1,-1,-1,2,3,-1,-1,-1,-1,-1,-1,-1,4,-1,4,-1,4,-1,-1,4,4,-1,3,-1,3,-1,3,3,5,-1,5,-1,4,-1,2,-1,1,-1,-1,-1,-1,-1,-1,-1],t.SOVIET=[8,6,-1,8,-1,9,-1,12,-1,11,-1,-1,-1,-1,-1,11,12,11,-1,10,-1,9,-1,12,-1,11,-1,-1,-1,-1,-1,-1,11,11,-1,10,-1,11,-1,-1,9,-1,-1,-1,0,0,0,0,0,0,0,5,8,9,8,7,0,0,0,0,0,0,0,6]},625:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.HOLD=t.PAUSE=t.availableValuesInGF=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(626),u=r(i),s=n(624),l=8,c=t.availableValuesInGF=[-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],f=t.PAUSE=0,d=t.HOLD=-1,p=function(){function e(){o(this,e)}return a(e,[{key:"selectComposition",value:function(e){u.default.setCurrent(e)}},{key:"getCurrentComposition",value:function(){return u.default.getCurrent()||s.REFERENCE_INDIVIDUAL}},{key:"getCurrentKey",value:function(){return u.default.getCurrentKey()}},{key:"getCompositionLength",value:function(){return 128}},{key:"getAllCompositions",value:function(){return u.default.getKeys()}},{key:"isValidName",value:function(e){return this.getAllCompositions().indexOf(e)===-1}},{key:"save",value:function(e,t){return u.default.save(e,t)}},{key:"remove",value:function(e){return u.default.remove(e)}},{key:"getByKey",value:function(e){return u.default.getByKey(e)}},{key:"getDefault",value:function(){return u.default.getDefault()}},{key:"getBarLength",value:function(){return l}},{key:"getMaxOneOctaveValue",value:function(){return 7}},{key:"getAvailableValues",value:function(e){var t=this.getMaxOneOctaveValue();return e?c.filter(function(e){return e<=t}):c}},{key:"getAvailablePitchValues",value:function(){var e=[f,d];return c.filter(function(t){return!e.includes(t)})}},{key:"getIntervalReference",value:function(){var e=[2,2,1,2,2,2,1,2,2,1,2,2,2,1];return e}},{key:"getHalfTonesBeetween",value:function(e,t){var n=this.getIntervalReference();if(e>t){var r=e;e=t,t=r}var o=n.slice(e,t);return o.reduce(function(e,t){return e+t},0)}}]),e}();t.default=new p},626:function(e,t){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o="default",a=[3,-1,3,-1,3,-1,-1,-1,3,-1,3,-1,3,-1,-1,-1,3,-1,5,-1,1,-1,-1,2,3,-1,-1,-1,-1,-1,-1,-1,4,-1,4,-1,4,-1,-1,4,4,-1,3,-1,3,-1,3,3,3,-1,2,-1,2,-1,3,-1,2,-1,-1,-1,5,-1,-1,-1,3,-1,3,-1,3,-1,-1,-1,3,-1,3,-1,3,-1,-1,-1,3,-1,5,-1,1,-1,-1,2,3,-1,-1,-1,-1,-1,-1,-1,4,-1,4,-1,4,-1,-1,4,4,-1,3,-1,3,-1,3,3,5,-1,5,-1,4,-1,2,-1,1,-1,-1,-1,-1,-1,-1,-1],i="__all",u="__current",s=e.localStorage||{getItem:function(){},setItem:function(){},removeItem:function(){},clear:function(){}},l=function(){function e(){n(this,e)}return r(e,[{key:"getKeys",value:function(){var e=this._getKeys();return e?(e.unshift(o),e):[o]}},{key:"_getKeys",value:function(){var e=s.getItem(i);return JSON.parse(e)}},{key:"getDefault",value:function(){return a}},{key:"getByKey",value:function(e){if(e===o)return this.getDefault();var t=s.getItem(e);return t?JSON.parse(t):null}},{key:"save",value:function(e,t){try{t=JSON.stringify(t),s.setItem(e,t);var n=JSON.parse(s.getItem(i))||[];n.indexOf(e)===-1&&n.push(e),s.setItem(i,JSON.stringify(n))}catch(e){return console.warn("You got invalid data"),!1}return!0}},{key:"getCurrentKey",value:function(){return s.getItem(u)||"default"}},{key:"getCurrent",value:function(){return this.getByKey(this.getCurrentKey())}},{key:"setCurrent",value:function(e){s.setItem(u,e)}},{key:"remove",value:function(e){var t=JSON.parse(s.getItem(i))||[],n=t.indexOf(e);n!==-1&&t.splice(n,1),s.setItem(i,JSON.stringify(t)),s.removeItem(e)}},{key:"clear",value:function(){s.clear()}}]),e}();t.default=new l}).call(t,function(){return this}())},627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(628);t.default=(0,o.createGroupMutation)("copy-paste-mutation",function(e,t){var n=r(t,2),o=n[0],a=n[1];e.copy(o,a)})},628:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return{name:e,run:p(t),render:h,getInitialState:function(){return n}}}function a(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":i(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var u="  ".repeat(t-1),s=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+a(e[n],t)+";"}).join("\n  "+u);return o.length>=r&&(s+="\n  "+u+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+u+s+"\n"+u+"}":"{\n  "+u+s+"\n"+u+"}"}if(!(e.length>0))return"Array";var l=function(){if(t>n)return{v:"[...]"};var o=a(e[0],t);return e.every(function(e){return a(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return a(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof l?"undefined":i(l))?l.v:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.createCalculate=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.createGroupMutation=o;var s=n(33),l=r(s),c=n(609),f=n(629),d=n(631),p=t.createCalculate=function(e){return function(t,n){if(!Array.isArray(t)||!t.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+a(t));if(null==n||"number"!=typeof n.groupSize||"number"!=typeof n.count)throw new TypeError('Value of argument "options" violates contract.\n\nExpected:\n{\n  groupSize: number;\n  count: number;\n}\n\nGot:\n'+a(n));var r=t.length,o=n.count,i=(0,d.fromPercentToValue)(r,n.groupSize);(0,d.validateGroupsInput)(r,i,o);var s=(0,f.createGroupsWithRandomOffset)(t,i),l=(0,d.getGroupsIndexes)(o,s.length()),c=u(l,2),p=c[0],h=c[1];return e(s,[p,h],n),s.toRaw()}},h=function(e,t){var n=e.count,r=e.groupSize;return l.default.createElement("div",null,l.default.createElement(c.SliderControl,{defaultValue:n,onBlur:t,field:"count",title:"Count of groups",min:1,max:10,step:1}),l.default.createElement(c.SliderControl,{defaultValue:r,onBlur:t,field:"groupSize",title:"Group size in percents",min:1,max:100,step:1}))},v={weight:.2,groupSize:5,count:2}},629:function(e,t,n){"use strict";function r(e,t){return e%t}function o(e,t){var n=r(e.length,t),o=i.numberUtils.randomBetween(0,n+1);return new a.Groups(e,t,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.createGroupsWithRandomOffset=o;var a=n(630),i=n(610)},630:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){var n=4,r=15;if(void 0===t&&(t=0),t+=1,null===e)return"null";if(void 0===e)return"void";if("string"==typeof e||"number"==typeof e||"boolean"==typeof e)return"undefined"==typeof e?"undefined":s(e);if(!Array.isArray(e)){var o=Object.keys(e);if(!o.length)return e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name:"Object";if(t>n)return"{...}";var a="  ".repeat(t-1),u=o.slice(0,r).map(function(n){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(n)?n:JSON.stringify(n))+": "+i(e[n],t)+";"}).join("\n  "+a);return o.length>=r&&(u+="\n  "+a+"..."),e.constructor&&e.constructor.name&&"Object"!==e.constructor.name?e.constructor.name+" {\n  "+a+u+"\n"+a+"}":"{\n  "+a+u+"\n"+a+"}"}if(!(e.length>0))return"Array";var l=function(){if(t>n)return{v:"[...]"};var o=i(e[0],t);return e.every(function(e){return i(e,t)===o})?{v:o.trim()+"[]"}:{v:"["+e.slice(0,r).map(function(e){return i(e,t)}).join(", ")+(e.length>=r?", ...":"")+"]"}}();return"object"===("undefined"==typeof l?"undefined":s(l))?l.v:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.Groups=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(198);t.Groups=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a(this,e),!Array.isArray(t)||!t.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(t));if("number"!=typeof n)throw new TypeError('Value of argument "size" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+i(n));if("number"!=typeof r)throw new TypeError('Value of argument "offset" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+i(r));this._chunks=this._createChunks(t,n,r)}return l(e,null,[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!Array.isArray(t)||!t.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "data" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(t));if("number"!=typeof n)throw new TypeError('Value of argument "size" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+i(n));if("number"!=typeof r)throw new TypeError('Value of argument "offset" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+i(r));return new e(t,n,r)}}]),l(e,[{key:"swap",value:function(e,t){var n=this;if(!Array.isArray(e)||!e.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "first" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(e));if(!Array.isArray(t)||!t.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "second" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(t));var r=this._arraysToMap(e,t),o=this._arraysToMap(t,e);this._chunks=this._chunks.map(function(e,t){return r[t]?n._chunks[r[t]]:o[t]?n._chunks[o[t]]:e})}},{key:"copy",value:function(e,t){var n=this;if(!Array.isArray(e)||!e.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "first" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(e));if(!Array.isArray(t)||!t.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "second" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(t));var r=this._arraysToMap(e,t);this._chunks=this._chunks.map(function(e,t){return null==r[t]?e:n._chunks[r[t]]})}},{key:"length",value:function(){function e(e){if("number"!=typeof e)throw new TypeError("Function return value violates contract.\n\nExpected:\nnumber\n\nGot:\n"+i(e));return e}return e(this._chunks.length)}},{key:"set",value:function(e,t){this._chunks[e]=t}},{key:"get",value:function(e){return this._chunks[e]}},{key:"all",value:function(){return this._chunks}},{key:"toRaw",value:function(){function e(e){if(!Array.isArray(e)||!e.every(function(e){return"number"==typeof e}))throw new TypeError("Function return value violates contract.\n\nExpected:\nArray<number>\n\nGot:\n"+i(e));return e}return e((0,c.flatten)(this._chunks))}},{key:"_createChunks",value:function(e,t,n){function r(e){if(!Array.isArray(e)||!e.every(function(e){return Array.isArray(e)&&e.every(function(e){return"number"==typeof e})}))throw new TypeError("Function return value violates contract.\n\nExpected:\nArray<Array<number>>\n\nGot:\n"+i(e));return e}var a=e.slice(0,n),u=(0,c.chunk)(e.slice(n),t);return r(a.length?[a].concat(o(u)):u)}},{key:"_arraysToMap",value:function(e,t){function n(e){if(null==e||"object"!==("undefined"==typeof e?"undefined":s(e))||!Object.keys(e).every(function(t){var n=e[t];return"number"==typeof n}))throw new TypeError("Function return value violates contract.\n\nExpected:\n{ [id: number]: number\n}\n\nGot:\n"+i(e));return e}if(!Array.isArray(e)||!e.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "first" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(e));if(!Array.isArray(t)||!t.every(function(e){return"number"==typeof e}))throw new TypeError('Value of argument "second" violates contract.\n\nExpected:\nArray<number>\n\nGot:\n'+i(t));return n(e.reduce(function(e,n,o){return u({},e,r({},n,t[o]))},{}))}}]),e}()},631:function(e,t,n){"use strict";function r(e,t,n){if(e<t*n)throw new Error("Invalid groupSize: "+t+" or groupsCount: "+n+" for size: "+e)}function o(e,t){return Math.floor(e*t/100)}function a(e,t){var n=i.arrayUtils.getRandomIndexes(2*e,t,[0,t-1]),r=n.length/2;
return[n.slice(0,r),n.slice(r)]}Object.defineProperty(t,"__esModule",{value:!0}),t.validateGroupsInput=r,t.fromPercentToValue=o,t.getGroupsIndexes=a;var i=n(610)},632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(628),a=n(198),i=n(610);t.default=(0,o.createGroupMutation)("order-mutation",function(e,t){var n=r(t,1),o=n[0];o.forEach(function(t){var n=e.get(t),r=(0,a.sortBy)(n);e.set(t,i.randomUtils.headsOrTails()?r:r.reverse())})})},633:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t.percents,r=c.default.getAvailableValues(),o=e.length,a=Math.floor(o*n/100);return s.arrayUtils.getRandomIndexes(a,o).reduce(function(e,t){return e[t]=s.arrayUtils.randomElement(r),e},e.slice())}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),i=r(a),u=n(609),s=n(610),l=n(625),c=r(l),f=function(e,t){return i.default.createElement(u.SliderControl,{defaultValue:e.percents,onBlur:t.bind(null,"percents"),field:"percents",title:"Percents",min:1,max:50,step:1})},d=function(){return{weight:.25,percents:5}};t.default={name:"random-mutation",run:o,render:f,getInitialState:d}},634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(628);t.default=(0,o.createGroupMutation)("reverse-mutation",function(e,t){var n=r(t,1),o=n[0];o.forEach(function(t){e.set(t,e.get(t).reverse())})})},635:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),a=r(o),i=n(609),u=n(636),s=n(625),l=r(s),c=l.default.getCompositionLength(),f=function(e,t){return a.default.createElement(i.SliderControl,{defaultValue:e.count,onBlur:t.bind(null,"count"),field:"count",title:"Count of genes",min:1,max:c,step:1})},d=function(){return{weight:1,count:10}};t.default={name:"sort-mutation",run:u.calculate,render:f,getInitialState:d}},636:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(t.count>=e.length)throw"To much gens for sort mutation";var n=e.length,o=a.numberUtils.randomBetween(0,n-t.count),i=o+t.count,u=e.slice(o,i).sort(function(e,t){return+e-+t});return[].concat(r(e.slice(0,o)),r(u),r(e.slice(i)))}Object.defineProperty(t,"__esModule",{value:!0}),t.calculate=o;var a=n(610)},637:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=Object.assign({},l,t),s.arrayUtils.getRandomIndexes(t.count,e.length-1).forEach(function(t){var n=e[t];e[t]=e[t+1],e[t+1]=n}),e}Object.defineProperty(t,"__esModule",{value:!0});var a=n(33),i=r(a),u=n(609),s=n(610),l={count:64},c=function(e,t){return i.default.createElement(u.SliderControl,{defaultValue:e.count,onBlur:t.bind(null,"count"),field:"count",title:"Count of genes",min:1,max:128,step:1})},f=function(){return{weight:.25,count:32}};t.default={name:"swap2-mutation",run:o,render:c,getInitialState:f}},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(628);t.default=(0,o.createGroupMutation)("swap-group-mutation",function(e,t){var n=r(t,2),o=n[0],a=n[1];e.swap(o,a)},{weight:.5,groupSize:5,count:2})},639:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(33),a=r(o),i=n(609),u=n(640),s={weight:.2,groupSize:5,count:2,transposeSize:2},l=function(e,t){var n=e.count,r=e.groupSize,o=e.transposeSize;return a.default.createElement("div",null,a.default.createElement(i.SliderControl,{defaultValue:n,onBlur:t,field:"count",title:"Count of groups",min:1,max:10,step:1}),a.default.createElement(i.SliderControl,{defaultValue:r,onBlur:t,field:"groupSize",title:"Group size in percents",min:1,max:100,step:1}),a.default.createElement(i.SliderControl,{defaultValue:o,onBlur:t,field:"transposeSize",title:"Size of transposition in steps",min:1,max:7,step:1}))};t.default={name:"transpose-mutation",run:u.calculate,render:l,getInitialState:function(){return s}}},640:function(e,t,n){"use strict";function r(e,t){if([u.PAUSE,u.HOLD].includes(e))return e;var n=e+t,r=n%s;return r?r:s}Object.defineProperty(t,"__esModule",{value:!0}),t.calculate=void 0;var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(198),i=n(628),u=n(625),s=(0,a.last)(u.availableValuesInGF);t.calculate=(0,i.createCalculate)(function(e,t,n){var a=o(t,1),i=a[0],u=n.transposeSize;i.forEach(function(t){var n=e.get(t);e.set(t,n.map(function(e){return r(e,u)}))})})},641:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(33),u=r(i),s=n(609),l=n(610),c={count:64},f=14,d=1,p=function(){function e(){o(this,e)}return a(e,[{key:"mutate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=Object.assign({},c,n);var r=l.arrayUtils.getRandomIndexes(n.count,e.length);return r.forEach(function(n){e[n]!==-1&&0!==e[n]&&(e[n]=t._mutateOne(e[n]))}),e}},{key:"_mutateOne",value:function(e){return Math.random()>.5?e<f?e+1:e:e>d+1?e-1:e}}]),e}(),h=new p,v=h.mutate.bind(h),_=function(e,t){return u.default.createElement(s.SliderControl,{defaultValue:e.count,onBlur:t.bind(null,"count"),field:"count",title:"Count of genes",min:1,max:128,step:1})},y=function(){return{weight:1,count:7}};t.default={name:"up-and-down-mutation",run:v,render:_,getInitialState:y}},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=t.run=void 0;var r=n(606),o=n(643),a=(0,r.createCompositeProvider)("fitness",o.plugins),i=a.run,u=a.Component;t.run=i,t.Component=u},643:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.plugins=void 0;var o=n(644),a=r(o),i=n(646),u=r(i),s=n(650),l=r(s),c=n(652),f=r(c),d=n(655),p=r(d),h=n(657),v=r(h),_=n(658),y=r(_),m=n(660),b=r(m),g=n(664),O=r(g),w=n(666),E=r(w),k=n(668),P=r(k);t.plugins=[a.default,u.default,l.default,f.default,p.default,v.default,y.default,b.default,O.default,E.default,P.default]},644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(645),o=function(e,t){var n=(0,r.normalizeNotesDiscrete)(e),o=(0,r.normalizeNotesDiscrete)(t),a=1/n.length;return n.reduce(function(e,t,n){return t===o[n]?e+a:e},0)},a=function(){return{weight:0}};t.default={name:"basic-reference-fitness",run:o,getInitialState:a}},645:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizer=t.normalizePitchToOctave=t.normalizeNotesDiscrete=t.normalizeRhythm=t.normalizeHolds=void 0;var o=n(625),a=r(o),i=n(610),u=(t.normalizeHolds=function(e){return e.reduce(function(e,t){return e.concat(t===-1?0:t)},[])},t.normalizeRhythm=function(e){return e.reduce(function(e,t){return e.concat([o.PAUSE,o.HOLD].includes(t)?0:1)},[])},t.normalizeNotesDiscrete=function(e){return e.reduce(function(e,t){return t>=0&&(e.note=t),e.data.push(e.note),e},{data:[],note:0}).data},a.default.getMaxOneOctaveValue());t.normalizePitchToOctave=function(e){return e.map(function(e){return i.numberUtils.normalizeValue(e,u)})},t.normalizer=function(e){return function(t){return e.reduce(function(e,t){return t(e)},t)}}},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(647),o=n(649);t.default={name:"cluster-fitness",run:(0,o.fitnessExecutor)(r.clusterMask)(o.barEqualityComparer),getInitialState:function(){return{weight:.1,_important:!1}}}},647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clusterMask=void 0;var r=n(625),o=n(648);t.clusterMask=(0,o.maskFactory)(function(e){return e.reduce(function(e,t){return e+t===r.PAUSE?0:1},0)/e.length})},648:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.maskFactory=void 0;var o=n(621),a=r(o);t.maskFactory=function(e){return function(t,n){return a.default.create(t).rawBars().map(function(t){return e(t,n)})}}},649:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.fitnessExecutor=function(e){return function(t){return function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(e(n,o),e(r,o),o)}}},t.barEqualityComparer=function(e,t){return t.reduce(function(t,n,r){return e[r]===n?t+1:t},0)/e.length});t.barContentEqualityComparer=function(e,t){return t.reduce(function(t,r,o){return t+n(r,e[o])},0)/e.length}},650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(651),o=n(649);t.default={name:"direction-fitness",run:(0,o.fitnessExecutor)(r.directionAnalyzer)(o.barEqualityComparer),getInitialState:function(){return{weight:.01}}}},651:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){return e===t?f.STABLE:e>t?f.DOWN:f.UP}function i(e,t){for(var n,r=t.size,i=(n={},o(n,f.UP,0),o(n,f.DOWN,0),o(n,f.STABLE,0),o(n,f.NONE,0),n),u=[],s=null,c=0;c<e.length;c++){var d=e[c];if(d!==l.PAUSE)if(u.length){var p=u[u.length-1],h=a(p,d);s?s===h?u.push(d):(u.length>r&&(i[s||f.NONE]+=1),u=[d],s=null):(s=h,u.push(d))}else u.push(d);else u.length>=r&&(i[s||f.NONE]+=1),u=[],s=null}return u.length>=r&&(i[s||f.NONE]+=1),i}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.size,o=void 0===n?d:n,a=t.spread,u=void 0===a?p:a,c=e.reduce(function(e,t){return t===l.HOLD?e:[].concat(r(e),[t])},[]),h=i(c,{size:o,spread:u}),v=Object.entries(h).sort(function(e,t){return e[1]<t[1]}),_=s(v,2),y=_[0],m=_[1];return y[1]-m[1]>=u?y[0]:f.NONE}Object.defineProperty(t,"__esModule",{value:!0}),t.directionAnalyzer=t.DIRECTION=void 0;var s=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.directionForBar=u,n(32);var l=n(625),c=n(648),f=t.DIRECTION={UP:"UP",DOWN:"DOWN",STABLE:"STABLE",NONE:"NONE"},d=3,p=3;t.directionAnalyzer=(0,c.maskFactory)(u)},652:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(653),a=r(o),i=a.default.fitness.bind(a.default),u=function(){return{weight:0}};t.default={name:"interval-fitness",run:i,getInitialState:u}},653:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(654),i=n(610),u=n(198),s={intervalValuesWeight:.5,intervalDispersionWeight:.5},l=function(){function e(){r(this,e),this._referenceValues=null}return o(e,[{key:"reset",value:function(){this._referenceValues=null}},{key:"fitness",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n=this._normalizeOptions(Object.assign({},s,n));var r=i.notesUtils.toPitch(e),o=i.notesUtils.toPitch(t),a=this._calculateIntervalValues(r);this._referenceValues||(this._referenceValues=this._calculateIntervalValues(o));var l=this._calculateFitness(a,n);return console.assert((0,u.isNumber)(l),"Result should be a number"),l}},{key:"_calculateFitness",value:function(e,t){var n=e.length,r=0,o=0;return this._referenceValues.some(function(t,a){var i=t.average,u=t.dispersion;if(n<=a)return!0;var s=e[a],l=s.average,c=s.dispersion;return r+=Math.abs(i-l),o+=Math.abs(u-c),!1}),r/=this._referenceValues.length,o/=this._referenceValues.length,console.assert((0,u.isNumber)(r),"AverageSum is a number"),r=(1-r/a.MAX_AVERAGE_DIFF)*t.intervalValuesWeight,o=(1-o/a.MAX_DISPERSION_DIFF)*t.intervalDispersionWeight,console.assert((0,u.isNumber)(r),"AverageSum is a number"),r+o}},{key:"_calculateIntervalValues",value:function(e){var t=this;return e.map(function(e){return t._calculateIntervalValuesForBar(e)})}},{key:"_calculateIntervalValuesForBar",value:function(e){var t=[],n=e.length,r=0;if(!n)return{average:0,dispersion:0};for(var o=0;o<n-1;o++){var i=e[o],u=e[o+1],s=(0,a.getValueBetweenNotes)(i,u);r+=s,t.push(s)}var l=r/n,c=t.map(function(e){return Math.pow(e-l,2)}).reduce(function(e,t){return e+t},0);return{average:l,dispersion:c}}},{key:"_normalizeOptions",value:function(e){var t=e.intervalValuesWeight+e.intervalDispersionWeight;return Object.assign(e,{intervalValuesWeight:e.intervalValuesWeight/t,intervalDispersionWeight:e.intervalDispersionWeight/t})}}]),e}();t.default=new l},654:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={0:s[t].PERFECT_CONSONANTS,5:s[t].PERFECT_CONSONANTS,7:s[t].PERFECT_CONSONANTS,12:s[t].PERFECT_CONSONANTS,3:s[t].IMPERFECT_CONSONANTS,4:s[t].IMPERFECT_CONSONANTS,8:s[t].IMPERFECT_CONSONANTS,9:s[t].IMPERFECT_CONSONANTS,1:s[t].SECONDS,2:s[t].SECONDS,10:s[t].SEVENTH,11:s[t].SEVENTH,6:s[t].GRATER_THAN_OCTAVE,"-1":s[t].GRATER_THAN_OCTAVE};return e>12?n[-1]:n[e]}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=u.default.getHalfTonesBeetween(e,t),a=o(r,n);return a}Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_DISPERSION_DIFF=t.MAX_AVERAGE_DIFF=void 0,t.getValueBetweenNotes=a;var i=n(625),u=r(i),s=[{PERFECT_CONSONANTS:1,IMPERFECT_CONSONANTS:2,SECONDS:3,SEVENTH:3,GRATER_THAN_OCTAVE:5},{PERFECT_CONSONANTS:1,IMPERFECT_CONSONANTS:3,SECONDS:1,SEVENTH:3,GRATER_THAN_OCTAVE:5}],l=t.MAX_AVERAGE_DIFF=4;t.MAX_DISPERSION_DIFF=l*l},655:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(656),a=r(o),i=a.default.fitness.bind(a.default),u=function(){return{weight:0}};t.default={name:"magnitude-fitness",run:i,getInitialState:u}},656:function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=[4,2,3,1],a=4,i=-1,u=0,s=function(){function e(){n(this,e)}return r(e,[{key:"fitness",value:function(e,t){for(var n=0,r=0,o=e.length;r<o;r++){var s=r%16,l=this._getBitValue(s),c=t[r],f=e[r];if(c!==i&&f!==i&&c!==u&&f!==u){var d=Math.abs(e[r]-t[r]);d>a||(n+=l*(1-d/a))}else c===f&&(n+=l)}return this._normalize(n)}},{key:"_getBitValue",value:function(e){for(var t=0;t<4;t++){var n=4*t;if(e>=n&&e<n+4)return o[t]}throw new"Something went wrong in MagnitudeFitness._gitBitValue"}},{key:"_normalize",value:function(e){return e/8/10/4}}]),e}();t.default=new s},657:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(656),a=r(o),i=a.default.fitness.bind(a.default),u=function(){return{weight:0}};t.default={name:"magnitude-fitness",run:i,getInitialState:u}},658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(659),o=n(649);t.default={name:"melody-line-fitness",run:(0,o.fitnessExecutor)(r.melodyLineMask)(o.barContentEqualityComparer),getInitialState:function(){return{weight:.5,_important:!1}}}},659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.melodyLineMask=void 0;var r=n(648),o=n(645);t.melodyLineMask=(0,r.maskFactory)(function(e){return(0,o.normalizeNotesDiscrete)(e)})},660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(661),o=n(662),a=function(e,t,n){console.assert(e.length===t.length);var a=(0,r.noteSizeDistributionAnalyzer)(t),i=(0,r.noteSizeDistributionAnalyzer)(e);return a.reduce(function(e,t,n){var r=i[n],a=(0,o.calculateError)(t,r);return e+(1-a)},0)/a.length},i=function(){return{weight:.3,_important:!1}};t.default={name:"note-size-partial-fitness",run:a,getInitialState:i}},661:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=1/e.length,n=e.reduce(function(e,n){var r=n.length();return e[r]=(e[r]||0)+t,e},{});return n}Object.defineProperty(t,"__esModule",{value:!0}),t.noteSizeDistributionAnalyzer=void 0;var a=n(621),i=r(a);t.noteSizeDistributionAnalyzer=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.default.create(e).bars().map(function(e){return o(e,t)})}},662:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateError=void 0;var r=n(663);t.calculateError=function(e,t){return Object.values((0,r.calculateDiffObject)(e,t)).reduce(function(e,t){return e+t},0)}},663:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.calculateDiffObject=function(e,t){return Object.keys(t).map(function(e){return{key:e,value:t[e]}}).reduce(function(e,t){var n=t.key,r=t.value;if(null!=e[n]){var o=e[n]-r;e[n]=o>0?o:0}return e},n({},e))}},664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(665),o=n(649);t.default={name:"rhythm-line-fitness",run:(0,o.fitnessExecutor)(r.rhythmLineMask)(o.barContentEqualityComparer),getInitialState:function(){return{weight:.2,_important:!1}}}},665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rhythmLineMask=void 0;var r=n(648),o=n(645);t.rhythmLineMask=(0,r.maskFactory)(function(e){return(0,o.normalizeRhythm)(e)})},666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(667),o=n(649);t.default={name:"rod-note-fitness",run:(0,o.fitnessExecutor)(r.rodNoteAnalyzer)(function(e,t){var n=1/e.length;return e.reduce(function(e,r,o){var a=n/r.length;return r.reduce(function(e,n,r){return n===t[o][r]?e+a:e},0)+e},0)}),getInitialState:function(){return{weight:0,_important:!1}}}},667:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.rodNoteAnalyzer=t.rodNoteForBar=t.ROD_TYPE=void 0;var a,i=n(625),u=n(648),s=t.ROD_TYPE={FIRST:"FIRST",TWO:"TWO",FOUR:"FOUR",FIRST_AND_LAST:"FIRST_AND_LAST"},l=(a={},o(a,s.FIRST,[0]),o(a,s.TWO,[0,4]),o(a,s.FOUR,[0,2,4,6]),o(a,s.FIRST_AND_LAST,[0,6]),a),c=t.rodNoteForBar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.rodeType,o=void 0===n?s.FIRST:n;return l[o].reduce(function(t,n){return[].concat(r(t),[e[n]===i.HOLD?null:e[n]])},[])};t.rodNoteAnalyzer=(0,u.maskFactory)(c)},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(669),o=n(649);t.default={name:"sign-sequence-fitness",run:(0,o.fitnessExecutor)(r.signMask)(o.barContentEqualityComparer),getInitialState:function(){return{weight:0,_important:!1}}}},669:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=i(e,2),n=t[0],r=t[1],a=void 0===r?[]:r;return f(n).reduce(function(e,t){var n=e.prev,r=e.data;if(null==n)return{data:[],prev:t};var a=t-n,i=0;return a>0?i=1:a<0&&(i=-1),{data:[].concat(o(r),[i]),prev:t}},{data:[],prev:(0,u.last)(f(a))}).data}Object.defineProperty(t,"__esModule",{value:!0}),t.signMask=void 0;var i=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.barAnalyzer=a;var u=n(198),s=n(625),l=n(621),c=r(l),f=function(e){return e.map(function(e){return e===s.HOLD?s.PAUSE:e})};t.signMask=function(e,t){return c.default.create(e).rawBars().reduce(function(e,n,r,i){return[].concat(o(e),[a([n,r?i[r-1]:void 0],t)])},[])}},670:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(33),i=r(a),u=n(206),s=n(609),l=n(612),c=n(615),f=r(c),d="options";f.default.GA[d]={maxIterations:200,deathLimit:.2,count:100,threshold:.9,mutationProbability:.5,useRandomInitialIndividuals:!0,countOfBestToLiveThrought:0,stopOnEndOfIterations:!0,useEvolutionStrategies:!0,migrationRate:20,migrationSize:.1,groupCount:4};var p=function(e,t){return function(n,r){return i.default.createElement(s.SliderControl,o({defaultValue:e[n],onBlur:t,field:n},r))}};t.render=function(e){var t=e.store,n=t.getState().GA[d],r=function(e,n){t.dispatch((0,l.changeOptions)([d,e],n))},o=p(n,r);return i.default.createElement(u.Panel,{collapsible:!0,defaultExpanded:!0,header:"Options"},o("maxIterations",{max:1e4,min:50,step:10}),o("deathLimit"),o("count",{max:500,min:25,step:1}),o("threshold"),o("mutationProbability"),o("countOfBestToLiveThrought",{max:10,min:0,step:1}),i.default.createElement(s.CheckboxControl,{onBlur:r,defaultValue:n.useRandomInitialIndividuals,field:"useRandomInitialIndividuals"}),i.default.createElement(s.CheckboxControl,{onBlur:r,defaultValue:n.stopOnEndOfIterations,field:"stopOnEndOfIterations"}),i.default.createElement(s.CheckboxControl,{onBlur:r,defaultValue:n.useEvolutionStrategies,field:"useEvolutionStrategies"}),o("migrationRate",{max:500,min:0,step:1}),o("migrationSize",{title:"Migration Size (in percents of population)",max:1,min:0,step:.01}),o("groupCount",{max:25,min:0,step:1}))}},671:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){t[e]={},Object.keys(n).map(function(e){return n[e]}).forEach(function(n){var r=n.name,o=n.getInitialState;return t[e][r]=o()})}function a(e){var t=(0,u.createPluginsHash)(e);o(g,l.default.GA,t);var n=(0,i.createRenderComponent)(g,t,{expanded:!0});return{Component:n,plugins:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.plugins=t.Component=void 0;var i=n(608),u=n(607),s=n(615),l=r(s),c=n(672),f=r(c),d=n(678),p=r(d),h=n(680),v=r(h),_=n(681),y=r(_),m=n(689),b=r(m),g="evolution",O=a([f.default,p.default,v.default,y.default,b.default]),w=O.Component,E=O.plugins;t.Component=w,t.plugins=E},672:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(673);t.default={executor:r.GA,name:"darwin-evolution",getInitialState:function(){return{weight:.5}}}},673:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.GA=t.NodeGA=t.BrowserGA=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(674),s=n(677),l=t.BrowserGA=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),i(t,[{key:"_loop",value:function(e,t,n){(0,s.loop)(e,t,n)}}]),t}(u.BaseGA),c=t.NodeGA=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments[2],i=arguments[3];r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,a,i));return u._rate=i,u}return a(t,e),i(t,[{key:"_loop",value:function(e,t,n){(0,s.syncLoop)(e,t,n)}}]),t}(u.BaseGA),f=new Function("try { return this === global; } catch(e) { return false; }")();console.log("ENVIRONMENT: "+(f?"NodeJS":"Browser"));t.GA=f?c:l},674:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseGA=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(675),c=r(l),f=n(198),d=n(676),p=n(605),h=n(619),v=n(642),_={onProgress:void 0,onDone:void 0,onPause:void 0,notifyRate:10,onMigration:void 0,migrationRate:void 0,migrationCount:10};t.BaseGA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=arguments[3];i(this,e),this._migrants=null;var a=t.crossover,u=t.mutation,s=t.fitness,l=t.options,c=t.evolution;this._id=o,this._reference=r,this._preference=t,this._options=l,this._evolution=c,this._workerOptions=Object.assign({},_,n),this._context={crossover:(0,p.run)(a),mutation:(0,h.run)(u),fitness:(0,v.run)(s)},this._cleanState(),this._run()}return s(e,[{key:"migrate",value:function(e){var t=this;this._migrants=e.map(function(e){return new c.default(t._reference,e,null,!1,t._context)})}},{key:"resume",value:function(){this._paused=!1,this._run()}},{key:"pause",value:function(){this._paused=!0}},{key:"stop",value:function(){this._paused=!0,this._stopped=!0}},{key:"_createInitialPopulation",value:function(){this._population=[];for(var e=0;e<this._options.count;e++)this._population.push(new c.default(this._reference,null,null,this._options.useRandomInitialIndividuals,this._context))}},{key:"_crossover",value:function(){for(var e=[],t=this._sortByFitness(this._population.slice());t.length>2;){var n=t.pop(),r=t.pop(),o=r.crossover(n);e.push(o)}return e}},{key:"_mutate",value:function(e){var t=this._options.mutationProbability,n=e.slice();return n.map(function(e){return Math.random()<t&&e.mutate(),e})}},{key:"_removeClones",value:function(e){return Object.values(e.reduce(function(e,t){return u({},e,a({},t.getHash(),t))},{}))}},{key:"_selection",value:function(e){var t=this._options,n=t.deathLimit,r=t.stopOnEndOfIterations,a=t.countOfBestToLiveThrought,i=this._removeClones(e).filter(function(e){return e.fitnessValue>n});if(r&&(i=i.filter(function(e){var t=e.fitnessValue;return 1!==t})),a&&i.length<a){var u=this._getBestWeHave(a,i.length,e);i=[].concat(o(i),o(u))}return i}},{key:"_getBestWeHave",value:function(e,t,n){for(var r=[],o=this._sortByFitness(n),a=t;a<e;a++)r.push(o[a]);return r}},{key:"_createNewPopulation",value:function(e){var t=e.slice(),n=this._options.count-t.length;if(n>0){for(var r=0;r<n;r++)t.push(new c.default(this._reference,null,null,this._options.useRandomInitialIndividuals,this._context));return t}return this._sortByFitness(t).slice(0,this._options.count)}},{key:"_isDone",value:function(){var e=this;return this._population.some(function(t){return t.fitnessValue>e._options.threshold})}},{key:"_getBest",value:function(e){var t=this;e=e||this._population,this._bestOne||(this._bestOne=e[0]);var n=this._bestOne?this._bestOne.fitnessValue:0;return e.forEach(function(e){e.fitnessValue>n&&(n=e.fitnessValue,t._bestOne=e)}),n}},{key:"_sortByFitness",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,d.populationSorter)(e,t)}},{key:"_cleanState",value:function(){this._i=0,this._paused=!1,this._stopped=!1,this._population=[],this._bestOne=null}},{key:"_run",value:function(){var e=this;this._createInitialPopulation(),this._loop(function(){return e._needToRun()},function(){return e._oneEra()},function(){return e._onCompletion()})}},{key:"_needToRun",value:function(){var e=this._options,t=e.maxIterations,n=e.stopOnEndOfIterations;return(n||!this._isDone())&&!this._paused&&this._i<t}},{key:"_oneEra",value:function(){this._i++;var e=this._population.slice();this._migrants&&(e.push.apply(e,o(this._migrants)),this._migrants=null);var t=this._mutate(this._crossover()),n=this._selection([].concat(o(t),o(e)));this._population=this._createNewPopulation(n),this._notificationProcess(),this._migrationProcess();
}},{key:"_onCompletion",value:function(){var e=this._workerOptions,t=e.onPause,n=e.onDone,r=this._snapshot(this._population);this._stopped?n({id:this._id,data:r}):this._paused?t({id:this._id,data:r}):n({id:this._id,data:r})}},{key:"_notificationProcess",value:function(){var e=this._workerOptions,t=e.onProgress,n=e.notifyRate,r=this._options.maxIterations,o=Boolean(t);if(o&&this._i%n===0){this._getBest();var a=this._formatFitness(this._i,r);t({id:this._id,percentage:a,best:this._bestOne.toFullFitnessDTO()})}}},{key:"_migrationProcess",value:function(){var e=this._workerOptions.onMigration,t=this._options.migrationRate;t&&e&&this._i%t===0&&e({id:this._id,migrants:this._getMigrants()})}},{key:"_getMigrants",value:function(){var e=this._options,t=e.migrationSize,n=e.count,r=n*t|0;return r?(0,f.sampleSize)(this._population,r).map(function(e){return e.content}):[]}},{key:"_snapshot",value:function(e){var t=this._sortByFitness(e),n=new c.default(this._reference,null,null,!1,this._context);return t.unshift(n),t.map(function(e){return e.toFullFitnessDTO()})}},{key:"_formatFitness",value:function(e,t){return e/t*100}},{key:"_loop",value:function(){throw new Error("Abstract GA class")}},{key:"_isOccur",value:function(e){return this._i%e===0}}]),e}()},675:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Individual=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(610),i=n(624),u=t.Individual=function(){function e(t,n,o){var u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments[4];r(this,e),this._context=s,this._reference=t.slice(),n?this._content=n:this._content=u?this._reference.map(function(){return a.arrayUtils.randomElement(i.availableValues)}):t.slice(),this._fitnessValue=null==o?this.fitness().value:o}return o(e,[{key:"clone",value:function(){return new e(this._reference,this.content,this.fitnessValue,!1,this._context)}},{key:"mutate",value:function(e){this._checkContext(),this._content=this._context.mutation(this._content),this._fitnessValue=this.fitness().value}},{key:"crossover",value:function(t){this._checkContext();var n=this._context.crossover(this.content,t.content);return new e(this._reference,n,null,!1,this._context)}},{key:"fitness",value:function(){return this._checkContext(),this._context.fitness(this.content,this._reference)}},{key:"getHash",value:function(){return this._content.join()}},{key:"toDTO",value:function(){return{_fitnessValue:this._fitnessValue,_reference:this._reference.slice(),_content:this._content.slice()}}},{key:"toFullFitnessDTO",value:function(){return{fitness:this.fitness(),content:this._content.slice()}}},{key:"_checkContext",value:function(){if(!this._context)throw new Error("Context is not defined, created via fromDTO")}},{key:"reference",get:function(){return this._reference.slice()}},{key:"context",get:function(){return this._context}},{key:"content",get:function(){return this._content.slice()}},{key:"fitnessValue",get:function(){return this._fitnessValue}}],[{key:"fromDTO",value:function(t){var n=t._reference,r=t._content,o=t._fitnessValue;return new e(n,r,o,!1)}}]),e}();t.default=u},676:function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.slice().sort(function(e,n){var r=e.fitnessValue,o=n.fitnessValue;return r===o?0:r>o?-t:t})}Object.defineProperty(t,"__esModule",{value:!0}),t.populationSorter=n},677:function(e,t){"use strict";function n(e,t,r){return t(),e()?void setTimeout(function(){return n(e,t,r)},0):void r()}function r(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o;return t(),e()?0===a?void setTimeout(function(){return r(e,t,n,o,o)},0):void r(e,t,n,o,--a):void n()}function o(e,t,n){for(;e();)t();n()}Object.defineProperty(t,"__esModule",{value:!0}),t.loop=n,t.debounceLoop=r,t.syncLoop=o},678:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(33),c=r(l),f=n(609),d=n(673),p=n(610),h=n(679),v=function(e,t){return c.default.createElement("div",null,(0,f.createSliderFactory)(e,t)([{field:"adaptationRate"},{field:"adaptationPercent"},{field:"maxChildren",max:10},{field:"environmentChangeRate",max:1e3},{field:"changeWeight",min:0,max:1,step:.01}]))},_=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r._environmentChanger=new h.EnvironmentChanger,i=n,a(r,i)}return i(t,e),u(t,[{key:"_oneEra",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_oneEra",this).call(this);var e=this._evolution,n=e.adaptationRate,r=e.environmentChangeRate;this._isOccur(n)&&this._adaptate(),this._isOccur(r)&&this._changeEnvironment()}},{key:"_changeEnvironment",value:function(){var e=this._evolution.changeWeight;this._context=this._environmentChanger.createContext(this._preference,e)}},{key:"_adaptate",value:function(){var e=this,t=this._evolution,n=t.adaptationPercent,r=t.maxChildren,o=this._population.length,a=Math.floor(o*n/100);if(a){var i=p.arrayUtils.getRandomIndexes(a,o),u=[];if(i.forEach(function(t){var n=e._population[t],r=n.clone();r.mutate(),r.fitnessValue>n.fitnessValue&&(u.push(r),e._population[t]=r)}),u.length>=2){for(;u.length>1;)for(var s=p.numberUtils.randomBetween(1,r),l=u.pop(),c=u.pop();s>0;)s--,this._population.push(c.crossover(l));this._population=this._createNewPopulation(this._population)}}}}]),t}(d.GA);t.default={executor:_,render:v,name:"lamark-evolution",getInitialState:function(){return{weight:.5,adaptationRate:10,adaptationPercent:20,maxChildren:4,environmentChangeRate:70,changeWeight:.2}}}},679:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentChanger=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(610),u=n(605),s=n(619),l=n(642),c=n(198);t.EnvironmentChanger=function(){function e(){r(this,e)}return a(e,[{key:"_changeWeights",value:function(e,t){return Object.values(e).forEach(function(e){e.weight=i.numberUtils.fluctuate(e.weight,t)}),e}},{key:"createContext",value:function(e,t){var n=e.crossover,r=e.mutation,o=e.fitness;return{crossover:(0,u.run)(this._changeWeights(n,t)),mutation:(0,s.run)(this._changeWeights(r,t)),fitness:(0,l.run)(this._changeWeights(o,t))}}},{key:"fluctuateOptions",value:function(e,t){var n=(0,c.cloneDeep)(e),r=n.crossover,a=n.mutation,i=n.fitness;return o({},e,{crossover:this._changeWeights(r,t),mutation:this._changeWeights(a,t),fitness:this._changeWeights(i,t)})}}]),e}()},680:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(33),c=r(l),f=n(609),d=n(673),p=n(610),h=n(679),v=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r._environmentChanger=new h.EnvironmentChanger,i=n,a(r,i)}return i(t,e),u(t,[{key:"_oneEra",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_oneEra",this).call(this);var e=this._evolution.catastropheRate;this._isOccur(e)&&this._catastrophe()}},{key:"_catastrophe",value:function(){var e=this._evolution,t=e.mutationCatastropheWeight,n=e.deadCatastropheWeight,r=e.environmentCatastropheWeight,o=this._getCatastropheKey();switch(o){case"mutation":this._mutationCatastrophe(t);break;case"dead":this._deadCatastrophe(n);break;case"environment":this._environmentCatastrophe(r)}}},{key:"_getCatastropheKey",value:function(){var e=this._evolution,t=e.mutationCatastropheProbability,n=e.deadCatastropheProbability,r=e.environmentCatastropheProbability;return p.selectionUtils.getRandomKey({mutationCatastropheProbability:t,deadCatastropheProbability:n,environmentCatastropheProbability:r}).replace("CatastropheProbability","")}},{key:"_mutationCatastrophe",value:function(e){console.log("Mutation Catastrophe Occurs!"),e&&(this._options.mutationProbability=p.numberUtils.strip(this._options.mutationProbability+e))}},{key:"_deadCatastrophe",value:function(e){if(console.log("Dead Catastrophe Occurs!"),e){var t=this._population.length,n=Math.floor(e*t);if(n){var r=p.arrayUtils.getRandomIndexes(n,t),o=this._population.filter(function(e,t){return!r.includes(t)});this._population=this._createNewPopulation(o)}}}},{key:"_environmentCatastrophe",value:function(e){console.log("Environmental Catastrophe Occurs!"),e&&(this._context=this._environmentChanger.createContext(this._preference,e))}}]),t}(d.GA),_=function(e,t){return c.default.createElement("div",null,(0,f.createSliderFactory)(e,t)([{field:"catastropheRate",min:0,max:100},(0,f.probabilitySlider)("mutationCatastropheProbability"),(0,f.probabilitySlider)("mutationCatastropheWeight"),(0,f.probabilitySlider)("deadCatastropheProbability"),(0,f.probabilitySlider)("deadCatastropheWeight"),(0,f.probabilitySlider)("environmentCatastropheProbability"),(0,f.probabilitySlider)("environmentCatastropheWeight")]))};t.default={render:_,executor:v,name:"vries-evolution",getInitialState:function(){return{weight:.5,catastropheRate:10,mutationCatastropheProbability:.2,mutationCatastropheWeight:.3,deadCatastropheProbability:.2,deadCatastropheWeight:.3,environmentCatastropheProbability:.2,environmentCatastropheWeight:.3}}}},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(682),o=n(687),a=n(688),i={speciesCount:{value:2,min:2,max:10},speciesSeparationRate:{value:10,min:10,max:1e3}};t.default={executor:r.KimuraExecutor,render:(0,a.getRenderFromMeta)(i),name:"kimura-evolution",getInitialState:(0,o.getInitialStateFromMeta)(i,.5)}},682:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.KimuraExecutor=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},c=n(683),f=r(c),d=n(673),p=n(675);t.KimuraExecutor=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"_oneEra",value:function(){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_oneEra",this).call(this);var e=this._evolution.speciesSeparationRate;this._isOccur(e)&&this._separate()}},{key:"_separate",value:function(){var e=this,t=this._evolution.speciesCount,n=f.default.kmeans(this._population.map(function(e){return e.content})),r=n.length;if(!(t>=r)){n.sort(function(e,t){return e.length-t.length});var a=n.slice(0,t),i=a.reduce(function(e,t){return[].concat(o(e),o(t))},[]),u=i.map(function(t){return new p.Individual(e._reference,t,null,!1,e._context)});this._population=this._createNewPopulation(u)}}}]),t}(d.GA)},687:function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getInitialStateFromMeta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3;return function(){return o({weight:t},Object.entries(e).reduce(function(e,t){var a=r(t,2),i=a[0],u=a[1].value;return o({},e,n({},i,u))},{}))}}},688:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderFromMeta=void 0;var o=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(33),i=r(a),u=n(609);t.getRenderFromMeta=function(e){return function(t,n){return i.default.createElement("div",null,(0,u.createSliderFactory)(t,n)(Object.entries(e).map(function(e){var t=o(e,2),n=t[0],r=t[1],a=r.min,i=r.max;return{field:n,min:a,max:i,step:1===i?.01:1}})))}}},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(690),o=n(687),a=n(688),i={environmentDifferenceWeight:{value:.3,min:0,max:1},groupsCount:{value:4,min:1,max:25}};t.default={executor:r.PunctuatedEquilibriumExecutor,render:(0,a.getRenderFromMeta)(i),name:"punctuated-equilibrium-evolution",getInitialState:(0,o.getInitialStateFromMeta)(i,.5)}},690:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.PunctuatedEquilibriumExecutor=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(691);var s=n(692),l=n(610),c=n(642),f=n(675),d=n(679),p=n(676),h=10;t.PunctuatedEquilibriumExecutor=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=arguments[3];a(this,e),this._environmentChanger=new d.EnvironmentChanger,this.currentIteration=0,this.runners={},this.iteration={},this.progressEvents={},this.pauseEvents={},this.doneEvents={},this._pauseFlags=null,this._doneFlags={},this._best=null,this._migrants=null,this._migrantsToSendToChilds=null,this._currentEra=0;var u=t.evolution.groupsCount;this.preferences=t,this.evolutionId=o,this.workerOptions=i({},n,{notifyRate:h}),this.reference=r,this.preferences.options.migrationRate%h&&console.warn("Migration rate ("+this.preferences.options.migrationRate+") is not supported. Should int divided by notification rate ("+h+").");for(var s=0;s<u;s++)this._createInstance(t,r)}return u(e,[{key:"migrate",value:function(e){var t;e&&e.length&&(this._migrantsToSendToChilds=this._migrantsToSendToChilds||[],(t=this._migrantsToSendToChilds).push.apply(t,o(e)))}},{key:"stop",value:function(){Object.values(this.runners).forEach(function(e){e.stop(),e.destroy()}),this.runners={},this.iteration={},this.progressEvents={},this._currentEra=0}},{key:"pause",value:function(){this._pauseFlags=Object.keys(this.runners).reduce(function(e,t){return i({},e,r({},t,!1))},{}),Object.values(this.runners).forEach(function(e){return e.pause()})}},{key:"resume",value:function(){Object.values(this.runners).forEach(function(e){return e.resume()})}},{key:"_oneEra",value:function(){var e=this.workerOptions.onMigration;this._currentEra+=h,console.log("new era",this._currentEra),e&&this._migrants&&this._currentEra%this.preferences.options.migrationRate===0&&(console.log("migration from PunctuatedEquilibriumExecutor"),e({id:this.evolutionId,migrants:this._migrants}),this._migrants=null)}},{key:"_createInstance",value:function(e,t){var n=this,r=(0,l.uuid)(),o=this._createInstanceOptions(e),a={onDone:function(e){return n._onInstanceDone(e,r)},onProgress:function(e){return n._onInstanceProgress(e,r)},onPause:function(e){return n._onInstancePause(e,r)}},i=new s.SimpleGARunner(o,a,t,function(e){return n._onMigrationFromInstances(e)});this.progressEvents[r]=null,this.iteration[r]=0,this.runners[r]=i,this._doneFlags[r]=!1}},{key:"_onMigrationFromInstances",value:function(e){var t;this._migrants=this._migrants||[],(t=this._migrants).push.apply(t,o(e));var n=this._migrantsToSendToChilds;return this._migrantsToSendToChilds=null,n}},{key:"_onInstanceDone",value:function(e,t){if(this.doneEvents[t]=e,this._doneFlags[t]=!0,!Object.values(this._doneFlags).some(function(e){return!e})){var n=this._getSnapshotEvent(this.doneEvents);this.workerOptions.onDone(i({id:this.evolutionId},n)),this._doneFlags={}}}},{key:"_onInstanceProgress",value:function(e,t){if(this.iteration[t]+=1,this.progressEvents[t]=e,!(this.currentIteration>=this._getMinIteration())){this._oneEra(),this.currentIteration+=1;var n=this._getCurrentIterationEvent();n&&this.workerOptions.onProgress(i({},n,{id:this.evolutionId}))}}},{key:"_onInstancePause",value:function(e,t){if(this.pauseEvents[t]=e,this._pauseFlags[t]=!0,!Object.values(this._pauseFlags).some(function(e){return!e})){var n=this._getSnapshotEvent(this.pauseEvents);this.workerOptions.onPause(i({id:this.evolutionId},n)),this._pauseFlags={}}}},{key:"_getSnapshotEvent",value:function(e){var t=this,n=void 0,r=Object.values(e).filter(function(e){return e}).reduce(function(e,t){var r=t.data;return n=r.shift(),[].concat(o(e),o(r.map(function(e){var t=e.content;return t})))},[]),a=this.preferences.fitness,i={fitness:(0,c.run)(a)},u=(0,p.populationSorter)(r.map(function(e){return new f.Individual(t.reference,e,null,!1,i)})).map(function(e){return e.toFullFitnessDTO()});return u.unshift(n),{data:u}}},{key:"_getCurrentIterationEvent",value:function(){var e=this,t=this.preferences.fitness,n={fitness:(0,c.run)(t)},r=Object.values(this.progressEvents).filter(function(e){return e}),o=r.reduce(function(e,t){var n=t.percentage;return n>e?e:n},r[0].percentage);if(100===o)return null;var a=r.map(function(t){return new f.Individual(e.reference,t.best.content,null,!1,n)});this._best||(this._best=a[0]);var i=a.reduce(function(e,t){return e.fitnessValue>t.fitnessValue?e:t},a[0]);return i.fitnessValue>this._best.fitnessValue&&(this._best=i),{best:this._best.toFullFitnessDTO(),percentage:o}}},{key:"_createInstanceOptions",value:function(e){var t=e.evolution,n=t.environmentDifferenceWeight,r=t.groupsCount,o=e.options.count,a=Math.floor(o/r);return i({},this._environmentChanger.fluctuateOptions(e,n),{options:i({},e.options,{count:a})})}},{key:"_getMinIteration",value:function(){return Math.min.apply(Math,o(Object.values(this.iteration)))}}]),e}()},691:function(e,t){"use strict";!function(){var e=!1;try{document}catch(t){e=!0}e&&(self.Worker||(self.Worker=function(e){var t=this;this.id=Math.random().toString(36).substr(2,5),this.eventListeners={message:[]},self.addEventListener("message",function(e){if(e.data._from===t.id){var n=new MessageEvent("message");n.initMessageEvent("message",!1,!1,e.data.message,t,"",null,[]),t.dispatchEvent(n),t.onmessage&&t.onmessage(n)}});var n=self.location.pathname,r=n.substring(0,n.lastIndexOf("/"))+"/"+e;self.postMessage({_subworker:!0,cmd:"newWorker",id:this.id,path:r})},Worker.prototype={onerror:null,onmessage:null,postMessage:function(e){self.postMessage({_subworker:!0,id:this.id,cmd:"passMessage",message:e})},terminate:function(){self.postMessage({_subworker:!0,cmd:"terminate",id:this.id})},addEventListener:function(e,t,n){this.eventListeners[e]&&this.eventListeners[e].push(t)},removeEventListener:function(e,t,n){if(e in this.eventListeners){var r=this.eventListeners[e].indexOf(t);r!==-1&&this.eventListeners[e].splice(r,1)}},dispatchEvent:function(e){for(var t=this.eventListeners[e.type],n=0;n<t.length;n++)t[n](e)}}));var t={},n={newWorker:function(e){var n=new Worker(e.data.path);n.addEventListener("message",function(t){var n={_from:e.data.id,message:t.data};e.target.postMessage(n)}),t[e.data.id]=n},terminate:function(e){t[e.data.id].terminate()},passMessage:function(e){t[e.data.id].postMessage(e.data.message)}},r=function(e){e.data._subworker&&n[e.data.cmd](e)},o=Worker;Worker=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){if(this.constructor!==Worker)throw new TypeError("Failed to construct 'Worker': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var t=e.indexOf("blob:");t!==-1&&0!==t&&(e=e.substring(t));var n=new o(e);return n.addEventListener("message",r),n})}()},692:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleGARunner=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(693),u=r(i);t.SimpleGARunner=function(){function e(t,n,r,a){o(this,e),this.onMigration=a,this._setupDefault(t,n,r)}return a(e,[{key:"_setupDefault",value:function(e,t,n){this._worker=new u.default,this._worker.onmessage=this._createOnMessage(t,this._worker),this._worker.onerror=function(e){return console.warn(e)},this._worker.postMessage({data:{options:e,reference:n},action:"start"})}},{key:"pause",value:function(){this._worker.postMessage({action:"pause"})}},{key:"resume",value:function(){this._worker.postMessage({action:"resume"})}},{key:"stop",value:function(){this._worker.postMessage({action:"stop"})}},{key:"destroy",value:function(){this._worker.terminate()}},{key:"_createOnMessage",value:function(e,t){var n=this,r=e.onDone,o=e.onProgress,a=e.onPause;return function(e){var i=e.data,u=i.data,s=i.action;if(console.log("SimpleGARunner: onmessage from worker "+s),"done"===s){var l=u.data;return o({percentage:100,best:l[1]}),void r(u)}if(o&&"progress"===s&&o({percentage:u.percentage,best:u.best}),a&&"pause"===s&&a(u),"migrate"===s){var c=n.onMigration(u.migrants);c&&t.postMessage({action:"migrate",data:{migrants:c}})}}}}]),e}()},693:function(e,t,n){e.exports=function(){return new Worker(n.p+"c01b4358ef245848376a.worker.js")}},694:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.GARunner=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(625),c=r(l),f=n(695),d=r(f),p=n(610),h=n(198);t.GARunner=function(){function e(t,n){a(this,e),this.workersPool={},this.migrationPool=[],this._useEvolutionStrategies=!1;var r=c.default.getCurrentComposition(),o=t.evolution;this._useEvolutionStrategies=t.options.useEvolutionStrategies,this._useEvolutionStrategies?this._setupEvolutions(o,t,n,r):this._setupDefault(t,n,r)}return s(e,[{key:"_setupEvolutions",value:function(e,t,n,r){var o=this,a=t.options.migrationSize,s=Object.entries(e).filter(function(e){var t=u(e,2),n=(t[0],t[1]);return n.weight>0}),l=s.reduce(function(e,t){var n=u(t,2),r=(n[0],n[1].weight);return e+r},0),c=s.map(function(e){var t=u(e,2),n=t[0],r=t[1];return[n,i({},r,{size:Math.floor(a*r.weight/l)})]});c.forEach(function(e){var a=u(e,2),s=a[0],l=a[1],c=s+"_"+(0,p.uuid)(),f=o.workersPool[c]=new d.default;f.onmessage=o._createOnMessageForEvolution(n,l,f,s),f.onerror=function(e){return console.warn(e)},f.postMessage({data:{options:i({},t,{count:l.size}),reference:r,id:c,evolutionName:s},action:"start"})})}},{key:"_setupDefault",value:function(e,t,n){this._worker=new d.default,this._worker.onmessage=this._createOnMessage(t),this._worker.onerror=function(e){return console.warn(e)},this._worker.postMessage({data:{options:e,reference:n},action:"start"})}},{key:"pause",value:function(){this._useEvolutionStrategies?Object.values(this.workersPool).forEach(function(e){return e.postMessage({action:"pause"})}):this._worker.postMessage({action:"pause"})}},{key:"resume",value:function(){this._useEvolutionStrategies?Object.values(this.workersPool).forEach(function(e){return e.postMessage({action:"resume"})}):this._worker.postMessage({action:"resume"})}},{key:"stop",value:function(){this._useEvolutionStrategies?Object.values(this.workersPool).forEach(function(e){return e.postMessage({action:"stop"})}):this._worker.postMessage({action:"stop"})}},{key:"destroy",value:function(){this._useEvolutionStrategies?(Object.values(this.workersPool).forEach(function(e){return e.terminate()}),this.workersPool={}):this._worker.terminate()}},{key:"_createOnMessageForEvolution",value:function(e,t,n,r){var a=e.onDone,i=e.onProgress,u=e.onPause,s=this;return function(e){var t=e.data,l=t.data,c=t.action;if(console.log("Evolutions: onmessage from worker "+r+", "+c),"done"===c){var f=l.data;return i({id:l.id,percentage:100,best:f[1]}),void a(l)}if(i&&"progress"===c&&i({id:l.id,percentage:l.percentage,best:l.best}),u&&"pause"===c&&u(l),"migrate"===c){var d,p=l.migrants,h=(l.id,s._getMigrants(p.length));h&&n.postMessage({action:"migrate",data:{migrants:h}}),(d=s.migrationPool).push.apply(d,o(p))}}}},{key:"_createOnMessage",value:function(e){var t=e.onDone,n=e.onProgress,r=e.onPause;return function(e){var o=e.data,a=o.data,i=o.action;if(console.log("onmessage from worker "+i),"done"===i){var u=a.data;return n({percentage:100,best:u[1]}),void t(a)}n&&"progress"===i&&n({percentage:a.percentage,best:a.best}),r&&"pause"===i&&r(a)}}},{key:"_getMigrants",value:function(e){var t=this;console.log(this.migrationPool.length);var n=p.arrayUtils.getRandomIndexes(e,this.migrationPool.length),r=n.map(function(e){return t.migrationPool[e]});return(0,h.remove)(this.migrationPool,function(e,t){return n.includes(t)}),console.log(this.migrationPool.length),r}}]),e}()},695:function(e,t,n){e.exports=function(){return new Worker(n.p+"7325311df0010cbd8d08.worker.js")}},696:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.IndividualsTable=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),
r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(206),f=n(461),d=r(f);t.IndividualsTable=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.stop=function(){d.default.stop()},n.state={selectedIndex:-1},n}return i(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("div",{className:"individuals-table-wrapper"},l.default.createElement("h4",null,"Population ",this.props.name,":"),l.default.createElement(c.Table,{striped:!0,bordered:!0,condensed:!0,hover:!0},l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null),l.default.createElement("th",null,"Name"),l.default.createElement("th",null,"Fitness"))),l.default.createElement("tbody",null,this._renderPopulation())))}},{key:"renderItem",value:function(e,t){var n=this.state.selectedIndex===t,r=n?"highlight":"",o=n?this.renderFitnessInfo(e):e.fitness.value.toFixed(3);return l.default.createElement("tr",{className:r,key:t,onClick:this.onSelect.bind(this,e,t)},l.default.createElement("td",null,l.default.createElement(c.ButtonGroup,null,l.default.createElement(c.Button,{bsStyle:"info",onClick:this.play.bind(this,e.content)},l.default.createElement("span",{className:"glyphicon glyphicon-play"})),l.default.createElement(c.Button,{bsStyle:"info",onClick:this.stop},l.default.createElement("span",{className:"glyphicon glyphicon-stop"})))),l.default.createElement("td",null,"name"+t),l.default.createElement("td",null,o))}},{key:"_renderPopulation",value:function(){var e=this;return this.props.population.map(function(t,n){return e.renderItem(t,n)})}},{key:"renderFitnessInfoItems",value:function(e){return e.map(function(e){var t=e.key,n=e.value,r=e.className;return l.default.createElement("tr",{key:t,className:r},l.default.createElement("td",null,t),l.default.createElement("td",null,n.toFixed(3)))})}},{key:"renderFitnessInfo",value:function(e){var t=this.renderFitnessInfoItems([{key:"total",className:"total",value:e.fitness.value}].concat(Object.keys(e.fitness.full).map(function(t){return{key:t,value:e.fitness.full[t]}})));return l.default.createElement(c.Table,{condensed:!0,style:{marginBottom:0}},l.default.createElement("tbody",null,t))}},{key:"play",value:function(e){d.default.play(e)}},{key:"onSelect",value:function(e,t){this.setState({selectedIndex:t}),this.props.onSelect(e)}}]),t}(l.default.Component)},697:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(698),f=r(c),d=n(699),p=r(d),h=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._element=null,n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this._element=this.refs.abcjs,this.props.data&&this._initializeWidget(this.props.data)}},{key:"componentWillReceiveProps",value:function(e){e.data&&this._initializeWidget(e.data)}},{key:"render",value:function(){return l.default.createElement("div",{ref:"abcjs"})}},{key:"_initializeWidget",value:function(e){f.default.renderAbc(this._element,(0,p.default)(e),null,{scale:1})}}]),t}(l.default.Component);t.default=h},698:function(e,t){e.exports=ABCJS},699:function(e,t){"use strict";function n(e,t){return null==e?"":i[e]+t}function r(e){for(var t=a,r=null,i=1,u=0,s=e.length;u<s;u++){var l=e[u];l===-1?i++:(t+=n(r,i),r=l,i=1),u===e.length-1&&(t+=n(r,i)),u&&u%8===0&&(t+="|"),u&&u%32===0&&(t+=o)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o="\n",a="\nX:1\nT:Abc\nM:4/4\nC:GA\nK:C\nL:1/8\n",i={0:"z",1:"C",2:"D",3:"E",4:"F",5:"G",6:"A",7:"B",8:"c",9:"d",10:"e",11:"f",12:"g",13:"a",14:"b"}},700:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(479),f=n(206),d=n(625),p=r(d),h="default",v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.select=function(e){p.default.selectComposition(e),n.setState({currentKey:e})},n.state={compositions:p.default.getAllCompositions(),nameRaw:"",name:"",currentKey:p.default.getCurrentKey()},n}return i(t,e),u(t,[{key:"onNameChange",value:function(e){var t=e.target.value;this.setState({nameRaw:t}),this.setState({name:""}),p.default.isValidName(t)&&this.setState({name:t})}},{key:"remove",value:function(e){p.default.remove(e),this.setState({compositions:p.default.getAllCompositions()})}},{key:"renderCompositionItem",value:function(e){var t=this;return l.default.createElement("tr",{key:e,className:e===this.state.currentKey?"selected":""},l.default.createElement("td",null,l.default.createElement(c.Link,{to:"/compositions/"+e},e)),l.default.createElement("td",null,e!==h?l.default.createElement(f.ButtonGroup,null,l.default.createElement(f.Button,{bsStyle:"info",onClick:function(){return t.select(e)}},l.default.createElement(f.Glyphicon,{glyph:"ok-sign"})),l.default.createElement(f.Button,{bsStyle:"danger",onClick:this.remove.bind(this,e)},l.default.createElement(f.Glyphicon,{glyph:"remove"}))):l.default.createElement(f.Button,{bsStyle:"info",onClick:function(){return t.select(e)}},l.default.createElement(f.Glyphicon,{glyph:"ok-sign"}))))}},{key:"render",value:function(){return l.default.createElement(f.Grid,{fluid:!0},l.default.createElement("h2",null,"Compositions"),l.default.createElement(f.Table,{striped:!0,bordered:!0,condensed:!0,hover:!0},l.default.createElement("tbody",null,this.state.compositions.map(this.renderCompositionItem.bind(this)))),l.default.createElement("h2",null,"New"),l.default.createElement(f.FormControl,{type:"text",label:"Name",onChange:this.onNameChange.bind(this),value:this.state.nameRaw}),l.default.createElement(c.Link,{to:"/compositions/"+this.state.name},l.default.createElement(f.Button,{bsStyle:"info",disabled:!this.state.name},"New")))}}]),t}(l.default.Component);t.default=v},701:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(33),l=r(s),c=n(206),f=n(461),d=r(f),p=n(625),h=r(p),v=n(697),_=r(v),y="default",m=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=h.default.getByKey(n.props.params.composition)||null;return n.state={compositionRaw:r?n.compositionToString(r):"",composition:r,invalidName:!0,invalidComposition:!1,isDefault:n.props.params.composition===y},n}return i(t,e),u(t,[{key:"_convert",value:function(e){var t=e.split(" ");return t=t.map(function(e){return Number(e)}),t.some(function(e){return isNaN(e)||p.availableValuesInGF.indexOf(e)===-1})?null:t}},{key:"compositionToString",value:function(e){return e&&e.join(" ")||""}},{key:"save",value:function(){var e=this.state.composition,t=this.props.params.composition;h.default.save(t,e)}},{key:"onChange",value:function(e){var t=e.target.value,n=this._convert(e.target.value);this.setState({compositionRaw:t}),n?(d.default.set(n),this.setState({composition:n,invalidComposition:!1})):this.setState({invalidComposition:!0})}},{key:"render",value:function(){var e=this.props.params.composition;return l.default.createElement(c.Grid,{fluid:!0},l.default.createElement("h3",null,e),l.default.createElement(c.Row,null,l.default.createElement(c.Col,{sm:4,md:4},l.default.createElement(c.FormControl,{componentClass:"textarea",style:{height:230},label:"Notes",onChange:this.onChange.bind(this),value:this.state.compositionRaw}),l.default.createElement(c.Button,{disabled:this.state.isDefault||this.state.invalidComposition,bsStyle:"success",onClick:this.save.bind(this)},"Save")),l.default.createElement(c.Col,{sm:4,md:4},l.default.createElement(_.default,{data:this.state.composition}))))}}]),t}(l.default.Component);t.default=m},702:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Root=void 0;var o=n(33),a=r(o),i=n(703),u=n(479),s=n(203),l=r(s);t.Root=function(e){var t=e.store;return a.default.createElement(i.Provider,{store:t},a.default.createElement(u.Router,{history:u.hashHistory,routes:l.default}))}},726:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return(0,a.createStore)(u.default,e)}Object.defineProperty(t,"__esModule",{value:!0}),t.configureStore=o;var a=n(709),i=n(727),u=r(i)},727:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(709),a=n(728),i=r(a);t.default=(0,o.combineReducers)({GA:i.default})},728:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(709),a=n(729),i=n(615),u=r(i),s=(0,a.createPluginsReducer)("crossover",u.default.GA),l=(0,a.createPluginsReducer)("mutation",u.default.GA),c=(0,a.createPluginsReducer)("options",u.default.GA),f=(0,a.createPluginsReducer)("fitness",u.default.GA),d=(0,a.createPluginsReducer)("evolution",u.default.GA);t.default=(0,o.combineReducers)({crossover:s,mutation:l,fitness:f,options:c,evolution:d})},729:function(e,t,n){"use strict";function r(e){return Array.isArray(e)?e:Array.from(e)}function o(e){var t=e.optionsPath,n=e.value,r={},o=t.length-1;return t.reduce(function(e,t,a){return a===o?(e[t]=n,r):e[t]={}},r)}function a(e,t){var n=t[e];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,a=arguments[1];switch(a.type){case s.OPTIONS_CHANGE_ACTION:if(a.optionsPath[0]!==e)return t;var l=r(a.optionsPath),c=l.slice(1),f=o({optionsPath:c,value:a.value});return(0,u.merge)(i({},t),f);default:return t}}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createDeepProperty=o,t.createPluginsReducer=a;var u=n(198),s=n(612)}});
//# sourceMappingURL=app.560af2f67b39365b5266.js.map